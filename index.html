<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><!DOCTYPE html>
<html lang="en" class="dark"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SENTINEL | TACTICAL OPS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600;700&family=Chakra+Petch:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class', // Manual toggling
            theme: {
                extend: {
                    colors: {
                        // Tactical Palette
                        'tac-amber': '#f59e0b',  // Primary Accent
                        'tac-blue': '#3b82f6',   // Info/HUD
                        
                        // Dark Mode (Night Ops)
                        'gunmetal-dark': '#1c1c1e',
                        'plate-dark': '#2c2c2e',
                        'border-dark': '#3a3a3c',
                        
                        // Light Mode (Field Ops)
                        'concrete-light': '#e5e5e5',
                        'plate-light': '#f5f5f5',
                        'border-light': '#d4d4d4',
                        'charcoal': '#1a1a1a',
                    },
                    fontFamily: {
                        'header': ['Chakra Petch', 'sans-serif'],
                        'body': ['Barlow', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                }
            }
        }
    </script>

    <style>
        /* Base Transition for Theme Switching */
        body { 
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Carbon Fiber / Mesh Texture */
        .bg-mesh {
            background-image: 
                linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.03) 75%, rgba(0,0,0,0.03)),
                linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.03) 75%, rgba(0,0,0,0.03));
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        /* Chamfered Edge Utility (Armored Look) */
        .chamfer {
            clip-path: polygon(
                10px 0, 100% 0, 
                100% calc(100% - 10px), calc(100% - 10px) 100%, 
                0 100%, 0 10px
            );
        }

        /* Tactical Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #52525b; border-radius: 0; }
        ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Search Input Reset */
        input[type="search"]::-webkit-search-decoration,
        input[type="search"]::-webkit-search-cancel-button,
        input[type="search"]::-webkit-search-results-button,
        input[type="search"]::-webkit-search-results-decoration { display: none !important; -webkit-appearance: none !important; }

        /* Active Sidebar Item Style */
        .nav-active {
            border-left: 4px solid #f59e0b;
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }
    </style>
</head>
<body class="bg-concrete-light dark:bg-gunmetal-dark text-charcoal dark:text-gray-300 font-body bg-mesh h-[100dvh] overflow-hidden flex flex-col">

    <div id="disclaimerModal" class="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm fade-in">
        <div class="w-full max-w-md bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-2xl p-6 chamfer">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-xl font-header font-bold text-charcoal dark:text-white uppercase tracking-widest">
                    <span class="text-tac-amber">‚ö†</span> System Notice
                </h2>
            </div>
            <p class="text-sm font-body text-gray-600 dark:text-gray-400 leading-relaxed mb-6">
                You are accessing the Sentinel Tactical Database. <br><br>
                <strong>OSINT ACKNOWLEDGEMENT:</strong> All data is aggregated from public sources. Technical specifications are estimates. No classified data resides on this node.
            </p>
            <button onclick="document.getElementById('disclaimerModal').remove()" class="w-full bg-tac-amber hover:bg-amber-500 text-black font-header font-bold uppercase py-3 tracking-widest chamfer transition-colors">
                Initialize System
            </button>
        </div>
    </div>

    <header class="fixed top-0 left-0 w-full h-16 z-[100] bg-plate-light dark:bg-plate-dark border-b border-border-light dark:border-border-dark flex items-center justify-between px-4 lg:px-6 shadow-md transition-colors duration-300">
        <div class="flex items-center gap-3 cursor-pointer group" onclick="app.view('home')">
            <div class="w-10 h-10 bg-gray-200 dark:bg-gray-800 flex items-center justify-center chamfer border border-gray-300 dark:border-gray-600 group-hover:border-tac-amber transition-colors">
                <span class="text-tac-amber font-header font-bold text-xl">S</span>
            </div>
            <div class="leading-none">
                <h1 class="text-xl font-header font-bold text-charcoal dark:text-white tracking-wide">SENTINEL <span class="text-tac-amber">DB</span></h1>
                <div class="text-[10px] font-mono text-gray-500 dark:text-gray-400 tracking-[0.2em] uppercase">Tactical Ops v61.0</div>
            </div>
        </div>

        <div class="flex-1 max-w-xl mx-6 hidden md:block relative">
            <div class="relative flex items-center">
                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                    <svg class="w-4 h-4 text-tac-amber" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <input type="search" id="desktopSearch" placeholder="SEARCH ASSETS..." 
                    class="w-full bg-gray-200 dark:bg-gunmetal-dark border border-border-light dark:border-border-dark text-charcoal dark:text-white font-mono text-xs py-2 pl-10 pr-8 focus:outline-none focus:border-tac-amber chamfer transition-colors"
                    oninput="app.search(this.value)">
                <button id="desktopClearBtn" onmousedown="event.preventDefault(); app.clearSearch('desktop')" class="absolute right-3 text-gray-500 hover:text-tac-amber hidden font-bold">‚úï</button>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <button onclick="app.toggleTheme()" class="w-10 h-10 flex items-center justify-center bg-gray-200 dark:bg-gunmetal-dark border border-border-light dark:border-border-dark chamfer hover:border-tac-amber text-gray-600 dark:text-gray-300 transition-all">
                <span id="themeIcon">‚òÄ</span>
            </button>

            <button class="md:hidden w-10 h-10 flex items-center justify-center bg-gray-200 dark:bg-gunmetal-dark border border-border-light dark:border-border-dark chamfer text-tac-amber" onclick="app.toggleMobileSearch()">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </button>

            <div class="hidden lg:block text-right">
                <div class="text-[9px] font-header font-bold text-gray-500 tracking-wider">NETWORK</div>
                <div class="text-[10px] font-mono font-bold text-tac-blue">SECURE</div>
            </div>
        </div>
    </header>

    <div id="mobileSearch" class="hidden fixed top-16 left-0 w-full bg-plate-light dark:bg-plate-dark border-b border-border-light dark:border-border-dark p-4 z-[90] flex gap-2 shadow-lg">
        <div class="relative flex-1">
            <input type="search" id="mobileSearchInput" placeholder="SEARCH..." 
                class="w-full bg-gray-200 dark:bg-gunmetal-dark border border-border-light dark:border-border-dark text-charcoal dark:text-white font-mono text-sm px-4 py-2 focus:outline-none focus:border-tac-amber chamfer"
                oninput="app.search(this.value)">
            <button id="mobileClearBtn" onmousedown="event.preventDefault(); app.clearSearch('mobile')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-tac-amber hidden">‚úï</button>
        </div>
        <button class="bg-gray-300 dark:bg-gray-700 text-charcoal dark:text-white font-header font-bold px-4 chamfer" onclick="app.closeMobileSearch()">X</button>
    </div>

    <div class="flex flex-1 overflow-hidden relative pt-16">
        
        <aside class="hidden md:flex w-64 bg-plate-light dark:bg-plate-dark border-r border-border-light dark:border-border-dark flex-col z-40 h-full shrink-0 transition-colors duration-300">
            <div class="p-4 border-b border-border-light dark:border-border-dark">
                <div class="text-[10px] font-header font-bold text-gray-400 dark:text-gray-500 tracking-widest mb-1">UNIT SELECTION</div>
            </div>
            
            <nav class="flex-1 overflow-y-auto py-2">
                <button onclick="app.view('nuclear')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-amber border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    STRATEGIC <span>‚ò¢</span>
                </button>
                <button onclick="app.view('army')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-amber border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    LAND FORCES <span>üõ°</span>
                </button>
                <button onclick="app.view('airforce')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-amber border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    AIR FORCE <span>‚úà</span>
                </button>
                <button onclick="app.view('navy')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-amber border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    NAVAL FORCES <span>‚öì</span>
                </button>
                
                <div class="my-2 border-t border-border-light dark:border-border-dark mx-4"></div>
                
                <button onclick="app.view('logistics')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-blue border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    LOGISTICS <span>üì¶</span>
                </button>
                <button onclick="app.view('industry')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-blue border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    INDUSTRY <span>üè≠</span>
                </button>
                <button onclick="app.view('future')" class="w-full text-left px-5 py-3 text-xs font-header font-bold text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-tac-blue border-l-4 border-transparent transition-all tracking-wider uppercase flex justify-between items-center group">
                    R&D / FUTURE <span>üî¨</span>
                </button>
            </nav>

            <div class="p-4 border-t border-border-light dark:border-border-dark bg-gray-200 dark:bg-gunmetal-dark">
                <div class="text-[10px] font-mono text-gray-500 text-center">
                    SYNC: <span id="syncTime">00:00:00</span>
                </div>
            </div>
        </aside>

        <main id="viewport" class="flex-1 overflow-y-auto p-6 md:p-8 relative pb-24 md:pb-10 custom-scrollbar scroll-smooth">
            </main>
        
        <button id="ghostArrow" onclick="app.scrollToTop()" class="absolute bottom-24 md:bottom-8 right-6 w-12 h-12 bg-tac-amber text-black chamfer flex items-center justify-center font-bold text-xl shadow-lg hover:bg-white transition-all opacity-0 pointer-events-none z-50">
            ‚Üë
        </button>
    </div>

    <div class="md:hidden fixed bottom-0 w-full h-16 bg-plate-light dark:bg-plate-dark border-t border-border-light dark:border-border-dark z-[80] flex items-center justify-around px-2 shadow-[0_-5px_15px_rgba(0,0,0,0.1)]">
        <button onclick="app.view('home')" class="flex flex-col items-center justify-center w-1/2 h-full text-gray-500 dark:text-gray-400 hover:text-tac-amber border-r border-border-light dark:border-border-dark">
            <span class="text-xl font-bold">‚ò∑</span>
            <span class="text-[9px] font-header font-bold tracking-widest mt-1">DASHBOARD</span>
        </button>
        <button onclick="app.toggleMobileMenu()" class="flex flex-col items-center justify-center w-1/2 h-full text-gray-500 dark:text-gray-400 hover:text-tac-amber">
            <span class="text-xl font-bold">‚ñ≤</span>
            <span class="text-[9px] font-header font-bold tracking-widest mt-1">MENU GRID</span>
        </button>
    </div>

    <div id="mobileMenu" class="md:hidden fixed inset-0 z-[85] bg-concrete-light dark:bg-gunmetal-dark pt-20 pb-20 px-4 overflow-y-auto flex flex-col">
        <div class="grid grid-cols-2 gap-3 mb-auto">
             <button onclick="app.viewMobile('nuclear')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">‚ò¢</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">STRATEGIC</span></button>
             <button onclick="app.viewMobile('army')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">üõ°</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">ARMY</span></button>
             <button onclick="app.viewMobile('airforce')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">‚úà</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">AIR FORCE</span></button>
             <button onclick="app.viewMobile('navy')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">‚öì</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">NAVY</span></button>
             <button onclick="app.viewMobile('logistics')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-blue shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">üì¶</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">LOGISTICS</span></button>
             <button onclick="app.viewMobile('industry')" class="p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-blue shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">üè≠</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">INDUSTRY</span></button>
             <button onclick="app.viewMobile('future')" class="col-span-2 p-4 bg-plate-light dark:bg-plate-dark border-l-4 border-tac-blue shadow-sm chamfer text-left h-24 flex flex-col justify-between"><span class="text-2xl">üî¨</span><span class="text-xs font-header font-bold text-charcoal dark:text-white">FUTURE PROJECTS / R&D</span></button>
        </div>
    </div>

    <script>
        // --- THEME LOGIC ---
        const themeIcon = document.getElementById('themeIcon');
        
        function initTheme() {
            if (localStorage.getItem('theme') === 'light') {
                document.documentElement.classList.remove('dark');
                themeIcon.innerText = '‚òæ'; // Icon for switching TO dark
            } else {
                document.documentElement.classList.add('dark');
                themeIcon.innerText = '‚òÄ'; // Icon for switching TO light
            }
        }
        
        initTheme();

        const app = {
            viewport: document.getElementById('viewport'),

            toggleTheme: function() {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                    themeIcon.innerText = '‚òæ';
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                    themeIcon.innerText = '‚òÄ';
                }
                // Force chart update if on a chart page
                const currentKey = history.state?.page || 'home';
                if(currentKey !== 'home') this.renderBranch(currentKey);
            },

            view: function(key) {
                this.viewport.scrollTop = 0; 
                if(key === 'home') this.renderHome();
                else this.renderBranch(key);
                
                if(key !== 'home') history.pushState({ page: key }, null, `#${key}`);
                else history.pushState({ page: 'home' }, null, '');
            },

            renderHome: function() {
                this.viewport.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-[60vh] fade-in pt-10">
                        <div class="w-24 h-24 bg-gray-200 dark:bg-gray-800 border-2 border-tac-amber chamfer flex items-center justify-center mb-8 shadow-xl">
                            <span class="text-5xl text-tac-amber animate-pulse font-header">‚å¨</span>
                        </div>
                        <h1 class="text-5xl md:text-7xl text-charcoal dark:text-white font-header font-bold tracking-tight mb-2">SENTINEL <span class="text-tac-amber">DB</span></h1>
                        <p class="text-gray-500 dark:text-gray-400 font-mono tracking-[0.3em] text-xs md:text-sm mb-12 uppercase">Tactical Intelligence Archive</p>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 w-full max-w-4xl px-4">
                            ${this.homeBtn('nuclear', 'STRATEGIC', 'text-tac-amber')}
                            ${this.homeBtn('army', 'ARMY', 'text-tac-amber')}
                            ${this.homeBtn('airforce', 'AIR FORCE', 'text-tac-amber')}
                            ${this.homeBtn('navy', 'NAVY', 'text-tac-amber')}
                            ${this.homeBtn('logistics', 'LOGISTICS', 'text-tac-blue')}
                            ${this.homeBtn('industry', 'INDUSTRY', 'text-tac-blue')}
                        </div>
                    </div>
                `;
            },

            homeBtn: function(key, title, colorClass) {
                return `
                    <div onclick="app.view('${key}')" class="bg-plate-light dark:bg-plate-dark border border-border-light dark:border-border-dark hover:border-tac-amber chamfer p-6 cursor-pointer transition-all flex flex-col items-center justify-center h-32 group shadow-sm hover:shadow-md">
                        <span class="text-charcoal dark:text-white font-header font-bold text-2xl group-hover:${colorClass} transition-colors tracking-wide">${title}</span>
                        <span class="text-[10px] text-gray-500 dark:text-gray-400 mt-2 font-mono uppercase group-hover:text-charcoal dark:group-hover:text-white">ACCESS &rarr;</span>
                    </div>
                `;
            },

            renderBranch: function(key) {
                const data = DB[key];
                let html = `
                    <div class="fade-in max-w-7xl mx-auto pb-10">
                        <div class="flex justify-between items-end border-b border-border-light dark:border-border-dark pb-4 mb-6 pt-2">
                            <div>
                                <h1 class="text-4xl text-charcoal dark:text-white font-header font-bold uppercase tracking-wide">${data.name}</h1>
                                <div class="flex items-center gap-2 mt-1">
                                    <div class="w-2 h-2 bg-tac-amber rounded-full"></div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 font-mono tracking-widest">SECTOR ID: ${key.toUpperCase()}</p>
                                </div>
                            </div>
                            <button onclick="app.view('home')" class="text-[10px] font-bold text-gray-500 dark:text-gray-400 border border-border-light dark:border-border-dark bg-plate-light dark:bg-plate-dark px-4 py-2 chamfer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors uppercase">Return to Base</button>
                        </div>
                        <div class="space-y-6">
                `;

                for(const [cKey, cat] of Object.entries(data.cats)) {
                    html += `
                        <div id="section-${cKey}" class="bg-plate-light dark:bg-plate-dark border border-border-light dark:border-border-dark chamfer overflow-hidden shadow-sm">
                            <button onclick="app.toggleCategory('${cKey}')" class="w-full p-5 flex justify-between items-center text-left focus:outline-none hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors">
                                <span class="text-lg font-header font-bold text-charcoal dark:text-white tracking-wide uppercase flex items-center gap-3">
                                    <span class="w-1 h-5 bg-tac-amber"></span> ${cat.name}
                                </span>
                                <span id="icon-${cKey}" class="text-tac-amber text-xl font-bold font-mono transition-transform duration-300 transform rotate-0">+</span>
                            </button>
                            
                            <div id="drawer-${cKey}" class="hidden transition-all duration-500 ease-in-out border-t border-border-light dark:border-border-dark">
                                <div class="p-2 bg-gray-100 dark:bg-gray-900/50 flex justify-end">
                                    <button onclick="document.getElementById('chart-${cKey}').scrollIntoView({behavior:'smooth'})" class="text-[9px] border border-border-light dark:border-border-dark px-3 py-1 rounded-sm text-gray-500 dark:text-gray-400 hover:bg-tac-amber hover:text-black font-mono uppercase font-bold tracking-widest transition-colors">
                                        ‚ñº LOAD ANALYTICS
                                    </button>
                                </div>
                                <div class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 bg-gray-50 dark:bg-transparent">
                    `;
                    
                    cat.items.forEach(item => {
                        let specs = '';
                        let i = 0;
                        for(const [k,v] of Object.entries(item.specs)) {
                            if(i++ < 3) specs += `<div class="flex justify-between text-[11px] text-gray-500 dark:text-gray-400 py-1 border-b border-gray-200 dark:border-gray-700/50"><span>${k}</span><span class="text-charcoal dark:text-gray-200 font-mono font-medium">${v}</span></div>`;
                        }
                        
                        html += `
                            <div onclick="app.openModal('${key}', '${cKey}', '${item.id}')" class="bg-white dark:bg-gray-800/40 border border-gray-200 dark:border-gray-700 p-5 chamfer cursor-pointer hover:border-tac-amber dark:hover:border-tac-amber hover:shadow-md transition-all group">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="text-lg font-bold text-charcoal dark:text-white font-header leading-none group-hover:text-tac-amber transition-colors">${item.name}</h4>
                                    <span class="text-[9px] px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-sm text-gray-500 dark:text-gray-300 font-mono font-bold border border-gray-200 dark:border-gray-600">${item.role}</span>
                                </div>
                                <div class="space-y-1 mb-3">
                                    ${specs}
                                </div>
                                <div class="text-[10px] text-right text-tac-blue font-bold font-mono group-hover:underline tracking-wider">VIEW INTEL &rarr;</div>
                            </div>
                        `;
                    });

                    html += `</div>
                        <div class="p-6 bg-gray-100 dark:bg-gunmetal-dark border-t border-border-light dark:border-border-dark">
                            <h4 class="text-[10px] text-gray-500 dark:text-gray-400 font-mono font-bold mb-4 tracking-widest border-b border-gray-300 dark:border-gray-700 pb-2">PERFORMANCE METRICS // ESTIMATED</h4>
                            <div class="chart-wrapper h-64"><canvas id="chart-${cKey}"></canvas></div>
                        </div>
                    </div></div>`;
                }
                
                html += `</div></div>`;
                this.viewport.innerHTML = html;

                setTimeout(() => {
                    for(const [cKey, cat] of Object.entries(data.cats)) {
                        this.renderDrawerChart(cKey, cat, key);
                    }
                }, 100);
            },

            // ... (Toggle Category, Mobile Search, etc. - same logic, updated styling)
            toggleCategory: function(id) {
                const allDrawers = document.querySelectorAll('[id^="drawer-"]');
                const allIcons = document.querySelectorAll('[id^="icon-"]');
                
                allDrawers.forEach(el => { if(el.id !== `drawer-${id}`) el.classList.add('hidden'); });
                allIcons.forEach(el => { if(el.id !== `icon-${id}`) el.innerText = '+'; });

                const drawer = document.getElementById(`drawer-${id}`);
                const icon = document.getElementById(`icon-${id}`);
                
                if(drawer.classList.contains('hidden')) {
                    drawer.classList.remove('hidden');
                    icon.innerText = '‚àí';
                    setTimeout(() => { document.getElementById(`section-${id}`).scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 100);
                } else {
                    drawer.classList.add('hidden');
                    icon.innerText = '+';
                }
            },

            renderDrawerChart: function(cKey, cat, bKey) {
                const ctx = document.getElementById(`chart-${cKey}`);
                if (!ctx) return;

                // Check Dark Mode for Chart Colors
                const isDark = document.documentElement.classList.contains('dark');
                const textColor = isDark ? '#9ca3af' : '#4b5563';
                const gridColor = isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)';
                const barColorStart = isDark ? 'rgba(59, 130, 246, 0.5)' : 'rgba(59, 130, 246, 0.7)';
                const barColorEnd = isDark ? 'rgba(245, 158, 11, 0.5)' : 'rgba(245, 158, 11, 0.7)';

                const labels = [];
                const dataPoints = [];
                
                let metric = 'Range (KM)';
                if (bKey === 'navy' && (cKey === 'surface' || cKey === 'subs')) metric = 'Displacement (Tons)';
                if (bKey === 'airforce' && cKey === 'fighters') metric = 'Speed (Mach x10)';
                if (cKey === 'armor') metric = 'Engine (HP)';
                if (cKey === 'infantry_arms') metric = 'Range (m)';

                cat.items.forEach(i => {
                    let val = 0;
                    let text = "";
                    if (metric === 'Range (KM)' && i.specs.Range) text = i.specs.Range;
                    if (metric === 'Range (m)' && i.specs.Range) text = i.specs.Range;
                    if (metric === 'Displacement (Tons)' && i.specs.Displacement) text = i.specs.Displacement;
                    if (metric === 'Engine (HP)' && i.specs.Engine) text = i.specs.Engine;
                    if (metric === 'Speed (Mach x10)' && i.specs.Speed) text = i.specs.Speed;

                    if(text) {
                        let matches = text.match(/(\d+(?:,\d+)*(?:\.\d+)?)/g);
                        if(matches) {
                            let nums = matches.map(m => parseFloat(m.replace(/,/g, '')));
                            val = Math.max(...nums);
                            if(metric.includes("Mach")) val = val * 10;
                        }
                    }
                    if (val > 0) { labels.push(i.name.split(' ')[0]); dataPoints.push(val); }
                });

                if (dataPoints.length === 0) { ctx.parentElement.style.display = 'none'; return; }

                const gradient = ctx.getContext('2d').createLinearGradient(0, 0, 400, 0);
                gradient.addColorStop(0, barColorStart);
                gradient.addColorStop(1, barColorEnd);

                new Chart(ctx, {
                    type: 'bar',
                    data: { 
                        labels: labels, 
                        datasets: [{ 
                            label: metric, 
                            data: dataPoints, 
                            backgroundColor: gradient,
                            borderColor: '#f59e0b',
                            borderWidth: 0,
                            barThickness: 10, 
                            borderRadius: 0 // Tactical square corners
                        }] 
                    },
                    options: { 
                        indexAxis: 'y', 
                        responsive: true, 
                        maintainAspectRatio: false, 
                        plugins: { legend: { display: false } }, 
                        scales: { 
                            x: { grid: { color: gridColor }, ticks: { color: textColor, font: { family: 'JetBrains Mono', size: 9 } } }, 
                            y: { grid: { display: false }, ticks: { color: textColor, font: { family: 'Barlow', weight: '600', size: 10 } } } 
                        } 
                    } 
                });
            },

            openModal: function(bKey, cKey, itemId) {
                const item = DB[bKey].cats[cKey].items.find(i => i.id === itemId);
                const data = DB[bKey];
                let specsFull = '';
                for(const [k,v] of Object.entries(item.specs)) specsFull += `<div class="bg-gray-100 dark:bg-gunmetal-dark border border-gray-200 dark:border-gray-700 p-3 chamfer"><div class="text-[9px] text-gray-500 uppercase font-mono mb-1 tracking-wider">${k}</div><div class="text-sm text-charcoal dark:text-gray-200 font-body font-semibold">${v}</div></div>`;

                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md fade-in';
                modal.innerHTML = `
                    <div class="w-full max-w-2xl bg-plate-light dark:bg-plate-dark border-l-4 border-tac-amber shadow-2xl relative overflow-hidden flex flex-col max-h-[85vh] chamfer" onclick="event.stopPropagation()">
                        <button class="absolute top-4 right-4 text-gray-500 hover:text-tac-amber transition-colors font-bold" onclick="this.closest('.fixed').remove()">‚úï</button>
                        <div class="p-8 border-b border-border-light dark:border-border-dark bg-gray-100 dark:bg-gunmetal-dark">
                            <div class="text-[10px] text-tac-amber font-mono font-bold tracking-[0.2em] mb-2">${data.name.toUpperCase()} // ${item.role.toUpperCase()}</div>
                            <h1 class="text-4xl font-header font-bold text-charcoal dark:text-white uppercase tracking-wide">${item.name}</h1>
                            ${item.desc ? `<p class="text-sm text-gray-600 dark:text-gray-400 mt-3 font-body leading-relaxed border-l-2 border-gray-300 dark:border-gray-600 pl-3">${item.desc}</p>` : ''}
                        </div>
                        <div class="p-8 overflow-y-auto custom-scrollbar">
                            <h3 class="text-xs text-gray-500 font-bold tracking-[0.2em] mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 uppercase">Tech Specs</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">${specsFull}</div>
                        </div>
                    </div>`;
                modal.onclick = () => modal.remove();
                document.body.appendChild(modal);
            },
            
            toggleMobileMenu: function() { document.getElementById('mobileMenu').classList.toggle('active'); },
            viewMobile: function(key) { this.toggleMobileMenu(); this.view(key); },
            toggleMobileSearch: function() { document.getElementById('mobileSearch').classList.toggle('hidden'); document.getElementById('mobileSearchInput').focus(); },
            closeMobileSearch: function() { 
                document.getElementById('mobileSearch').classList.add('hidden'); 
                document.getElementById('mobileSearchInput').value = '';
                this.view('home'); 
            },
            search: function(q) {
                if (!q || q.length < 2) { this.view('home'); return; }
                q = q.toLowerCase();
                let html = `<div class="fade-in pt-4"><h2 class="text-2xl text-charcoal dark:text-white font-header font-bold mb-6 tracking-wide border-b border-border-light dark:border-border-dark pb-2">SEARCH RESULTS: "<span class="text-tac-amber">${q.toUpperCase()}</span>"</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4">`;
                let count = 0;
                for (const [bKey, branch] of Object.entries(DB)) {
                    for (const [cKey, cat] of Object.entries(branch.cats)) {
                        cat.items.forEach(item => {
                            if (item.name.toLowerCase().includes(q) || item.id.includes(q)) {
                                count++;
                                html += `<div onclick="app.openModal('${bKey}', '${cKey}', '${item.id}')" class="bg-plate-light dark:bg-plate-dark border border-border-light dark:border-border-dark p-4 cursor-pointer chamfer hover:border-tac-amber transition-all group"><div class="text-charcoal dark:text-white font-bold font-header text-xl group-hover:text-tac-amber transition-colors">${item.name}</div><div class="text-[10px] text-gray-500 font-mono mt-1 uppercase">${branch.name} // ${item.role}</div></div>`;
                            }
                        });
                    }
                }
                if (count === 0) html += `<div class="text-gray-500 font-mono text-sm col-span-3 py-8 text-center border border-dashed border-gray-400 dark:border-gray-700 rounded">NO MATCHING ASSETS IDENTIFIED.</div>`;
                html += `</div></div>`;
                this.viewport.innerHTML = html;
                
                const dBtn = document.getElementById('desktopClearBtn');
                const mBtn = document.getElementById('mobileClearBtn');
                if(q.length > 0) {
                    if(dBtn) dBtn.classList.remove('hidden');
                    if(mBtn) mBtn.classList.remove('hidden');
                } else {
                    if(dBtn) dBtn.classList.add('hidden');
                    if(mBtn) mBtn.classList.add('hidden');
                }
            },
            clearSearch: function(type) {
                const id = type === 'desktop' ? 'desktopSearch' : 'mobileSearchInput';
                const el = document.getElementById(id);
                el.value = '';
                el.focus();
                this.search('');
                const btnId = type === 'desktop' ? 'desktopClearBtn' : 'mobileClearBtn';
                document.getElementById(btnId).classList.add('hidden');
            },
            scrollToTop: function() { this.viewport.scrollTo({ top: 0, behavior: 'smooth' }); }
        };

        // History
        window.onpopstate = function(event) {
            if (event.state && event.state.page) {
                if (event.state.page === 'home') app.renderHome();
                else app.renderBranch(event.state.page);
            } else {
                app.renderHome();
            }
        };

        app.renderHome();
        history.replaceState({ page: 'home' }, null, '');
        
        const ghost = document.getElementById('ghostArrow');
        document.getElementById('viewport').addEventListener('scroll', (e) => {
            if(e.target.scrollTop > 300) { ghost.classList.remove('opacity-0', 'pointer-events-none'); }
            else { ghost.classList.add('opacity-0', 'pointer-events-none'); }
        });
        
        // Populate DB
        const DB = {
            nuclear: { 
                name: "Strategic Command", color: "text-tac-amber", accent: "#f59e0b", 
                cats: { 
                    ballistic: { 
                        name: "Ballistic Missiles", 
                        items: [
                            { id: "shaheen3", name: "Shaheen-III", role: "MRBM", specs: { "Range": "2,750 km", "Warhead": "Nuclear/HE/EMP", "Guidance": "INS/GPS", "Propulsion": "Solid (2-Stage)", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ababeel", name: "Ababeel", role: "MIRV MRBM", specs: { "Range": "2,200 km", "Warhead": "MIRV (3-8 RVs)", "Guidance": "Inertial + Star", "Propulsion": "Solid (3-Stage)", "Origin": "KRL", "Status": "Active" } },
                            { id: "shaheen2", name: "Shaheen-II", role: "MRBM", specs: { "Range": "2,000 km", "Warhead": "Single (Nuc/HE)", "Guidance": "INS/GPS", "Propulsion": "Solid (2-Stage)", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ghauri", name: "Ghauri (Hatf-V)", role: "MRBM", specs: { "Range": "1,300 km", "Warhead": "700 kg", "Guidance": "Inertial", "Propulsion": "Liquid (TM-185)", "Origin": "KRL", "Status": "Active" } },
                            { id: "shaheen1a", name: "Shaheen-IA", role: "SRBM", specs: { "Range": "900 km", "Warhead": "Nuclear/HE", "Guidance": "Terminal Guidance", "Propulsion": "Solid", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "shaheen1", name: "Shaheen-I", role: "SRBM", specs: { "Range": "750 km", "Warhead": "Nuclear/HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ghaznavi", name: "Ghaznavi", role: "SRBM", specs: { "Range": "290 km", "Warhead": "Nuclear/HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "abdali", name: "Abdali", role: "SRBM", specs: { "Range": "180 km", "Warhead": "Variable", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "nasr", name: "Nasr", role: "TNW", specs: { "Range": "70 km", "Warhead": "Sub-kiloton Nuke", "Guidance": "High Precision", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "hatf1", name: "Hatf-I/IB", role: "BRBM", specs: { "Range": "100 km", "Warhead": "HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "KRL", "Status": "Active" } }
                        ] 
                    }, 
                    cruise: { 
                        name: "Strategic Cruise Missiles", 
                        items: [
                            { id: "babur3", name: "Babur-III", role: "SLCM", specs: { "Range": "450 km", "Warhead": "Nuclear", "Guidance": "TERCOM", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "babur2", name: "Babur-2", role: "GLCM", specs: { "Range": "700 km", "Warhead": "Nuclear/HE", "Guidance": "TERCOM/DSMAC", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "babur1b", name: "Babur-1B", role: "GLCM", specs: { "Range": "700 km", "Warhead": "Dual (Nuc/HE)", "Guidance": "INS/GPS", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "raad2", name: "Ra'ad-II", role: "ALCM", specs: { "Range": "600 km", "Warhead": "Nuc/HE", "Guidance": "TERCOM", "Propulsion": "Turbofan", "Origin": "AWC", "Status": "Active" } },
                            { id: "raad1", name: "Ra'ad-I", role: "ALCM", specs: { "Range": "350 km", "Warhead": "Nuc/HE", "Guidance": "INS/GPS", "Propulsion": "Turbojet", "Origin": "AWC", "Status": "Active" } }
                        ] 
                    } 
                } 
            },
            army: { 
                name: "Pakistan Army", color: "text-tac-blue", accent: "#3b82f6", 
                cats: { 
                     drones_loitering: {
                        name: "Loitering Munitions & Drones",
                        items: [
                             { id: "sarfarosh", name: "Sarfarosh", role: "Strategic Strike", specs: { "Range": "800 km", "Warhead": "HE/Anti-Radiation", "Guidance": "Advanced", "Propulsion": "Propeller", "Origin": "Indigenous", "Status": "Active" } },
                             { id: "blaze75", name: "Blaze-75", role: "Loitering", specs: { "Range": "500 km", "Warhead": "30 kg", "Guidance": "AI/EO/IR", "Propulsion": "Gasoline", "Origin": "GIDS", "Status": "Active" } },
                             { id: "blaze50", name: "Blaze-50", role: "Loitering", specs: { "Range": "180 km", "Warhead": "20 kg", "Guidance": "AI/EO/IR", "Propulsion": "Gasoline", "Origin": "GIDS", "Status": "Active" } },
                             { id: "blaze25", name: "Blaze-25", role: "Loitering", specs: { "Range": "75 km", "Warhead": "Anti-Tank", "Guidance": "Man-in-Loop", "Propulsion": "Electric", "Origin": "GIDS", "Status": "Active" } },
                             { id: "ababeel_v", name: "Ababeel-V", role: "Loitering", specs: { "Range": "Unknown", "Warhead": "HE", "Endurance": "4 Hours", "Origin": "GIDS", "Status": "Active" } },
                             { id: "burraq", name: "Burraq", role: "UCAV", specs: { "Role": "COIN/Strike", "Speed": "200 km/h", "Armament": "Barq Missile", "Endurance": "12 Hours", "Origin": "NESCOM", "Status": "Active" } }
                        ]
                    },
                    ad_army: { 
                        name: "Army Air Defense", 
                        items: [
                            { id: "hq9p", name: "HQ-9/P", role: "HIMADS", specs: { "Range": "250km", "Guidance": "Active Radar", "Ceiling": "27km", "Radar": "AESA", "Origin": "China", "Status": "Active" } },
                            { id: "ly80", name: "LY-80", role: "LOMADS", specs: { "Range": "70km", "Guidance": "Semi-Active", "Ceiling": "18km", "Radar": "IBIS-150", "Origin": "China", "Status": "Active" } },
                            { id: "spada", name: "Spada 2000", role: "LOMADS", specs: { "Range": "25km", "Guidance": "Semi-Active", "Ceiling": "14km", "Radar": "RAC-3D", "Origin": "Italy", "Status": "Active" } },
                            { id: "fm90", name: "FM-90", role: "SHORAD", specs: { "Range": "15km", "Guidance": "Command Line", "Ceiling": "6km", "Mount": "Mobile 6x6", "Origin": "China", "Status": "Active" } },
                            { id: "anza3", name: "Anza Mk-III", role: "MANPADS", specs: { "Range": "6km", "Guidance": "IR Homing", "Speed": "Mach 2", "Origin": "KRL", "Status": "Active" } },
                            { id: "rbs70", name: "RBS-70 NG", role: "MANPADS", specs: { "Range": "9km", "Guidance": "Laser Beam", "Speed": "Mach 2", "Origin": "Sweden", "Status": "Active" } },
                            { id: "mistral", name: "Mistral", role: "MANPADS", specs: { "Range": "6km", "Guidance": "IR Homing", "Speed": "Mach 2.5", "Origin": "France", "Status": "Active" } },
                            { id: "oerlikon", name: "Oerlikon GDF", role: "AAA", specs: { "Range": "4km", "Guidance": "Radar Control", "Speed": "1100 rpm", "Origin": "Switzerland", "Status": "Active" } },
                            { id: "zu23", name: "ZU-23-2", role: "AAA", specs: { "Range": "2.5km", "Guidance": "Optical", "Speed": "400 rpm", "Origin": "China/Pak", "Status": "Active" } }
                        ] 
                    },
                    aviation: {
                        name: "Army Aviation",
                        items: [
                            { id: "z10me", name: "Z-10ME", role: "Attack Helo", specs: { "Role": "Attack", "Speed": "270 km/h", "Armament": "AKD-10/23mm", "Range": "800 km", "Origin": "China" } },
                            { id: "mi35", name: "Mi-35M", role: "Assault Helo", specs: { "Role": "Attack/Transport", "Speed": "310 km/h", "Armament": "Shturm/23mm", "Range": "460 km", "Origin": "Russia" } },
                            { id: "cobra", name: "AH-1F/S Cobra", role: "Attack Helo", specs: { "Role": "Anti-Armor", "Speed": "277 km/h", "Armament": "TOW/20mm", "Range": "500 km", "Origin": "USA" } },
                            { id: "mi17", name: "Mi-171E", role: "Transport", specs: { "Role": "Utility", "Speed": "250 km/h", "Capacity": "24 Troops", "Range": "465 km", "Origin": "Russia" } },
                            { id: "puma", name: "SA330 Puma", role: "Transport", specs: { "Role": "Utility", "Speed": "257 km/h", "Capacity": "16 Troops", "Range": "580 km", "Origin": "France" } },
                            { id: "bell412", name: "Bell 412", role: "Transport", specs: { "Role": "VIP/Utility", "Speed": "260 km/h", "Capacity": "13 Pax", "Range": "980 km", "Origin": "USA" } },
                            { id: "ecureuil", name: "AS350 Ecureuil", role: "Light Utility", specs: { "Role": "High Altitude", "Speed": "287 km/h", "Capacity": "5 Pax", "Range": "660 km", "Origin": "France" } },
                            { id: "mushshak_a", name: "Mushshak", role: "Trainer", specs: { "Role": "Basic Trainer", "Speed": "238 km/h", "Capacity": "2 Seats", "Range": "800 km", "Origin": "PAC" } }
                        ]
                    },
                    armor: { 
                        name: "Armored Corps", 
                        items: [
                            { id: "vt4", name: "VT-4 Haider", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1200hp Diesel", "Armor": "Composite+FY-4 ERA", "Speed": "70 km/h", "Origin": "NORINCO/HIT", "Status": "Active" } },
                            { id: "alkhalid1", name: "Al-Khalid I", role: "MBT", specs: { "Gun": "125mm KBA-3", "Engine": "1200hp 6TD-2", "Armor": "Composite+ERA", "Speed": "72 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "alkhalid", name: "Al-Khalid", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1200hp 6TD-2", "Armor": "Composite+ERA", "Speed": "70 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "t80ud", name: "T-80UD", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1000hp 6TD-1", "Armor": "K-5 ERA", "Speed": "60 km/h", "Origin": "Ukraine", "Status": "Active" } },
                            { id: "alzarrar", name: "Al-Zarrar", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "730hp Diesel", "Armor": "Add-on ERA", "Speed": "55 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "type85", name: "Type 85-IIAP", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "730hp Diesel", "Armor": "Composite", "Speed": "57 km/h", "Origin": "China", "Status": "Active" } },
                            { id: "type69", name: "Type 69-IIMP", role: "MBT", specs: { "Gun": "105mm Rifled", "Engine": "580hp Diesel", "Armor": "Steel", "Speed": "50 km/h", "Origin": "China/HIT", "Status": "Reserve" } },
                            { id: "hamza6", name: "Hamza 6x6", role: "MRAP", specs: { "Gun": "12.7mm Turret", "Engine": "Diesel", "Armor": "Mine Resistant", "Speed": "90 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "talha", name: "Talha", role: "APC", specs: { "Gun": "12.7mm HMG", "Engine": "Detroit Diesel", "Armor": "Aluminum 5083", "Speed": "62 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "saad", name: "Saad", role: "APC", specs: { "Gun": "14.5mm HMG", "Engine": "400hp", "Armor": "Enhanced", "Speed": "65 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "m113", name: "M113", role: "APC", specs: { "Gun": "12.7mm HMG", "Engine": "215hp", "Armor": "Aluminum", "Speed": "60 km/h", "Origin": "USA", "Status": "Active" } },
                            { id: "maxxpro", name: "MaxxPro", role: "MRAP", specs: { "Gun": "12.7mm", "Engine": "MaxxForce", "Armor": "V-Hull", "Speed": "100 km/h", "Origin": "USA", "Status": "Active" } },
                            { id: "dragoon", name: "Dragoon", role: "AFV", specs: { "Gun": "90mm", "Engine": "300hp", "Armor": "Steel", "Speed": "100 km/h", "Origin": "HIT", "Status": "Police" } }
                        ] 
                    },
                    artillery: { 
                        name: "Artillery & MLRS", 
                        items: [
                            { id: "fatah1", name: "Fatah-1", role: "GMLRS", specs: { "Caliber": "300mm", "Range": "140 km", "Guidance": "Inertial", "Origin": "GIDS", "Status": "Active" } },
                            { id: "a100", name: "A-100", role: "MLRS", specs: { "Caliber": "300mm", "Range": "100 km", "Guidance": "Simple Inertial", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "krl122", name: "KRL-122", role: "MLRS", specs: { "Caliber": "122mm", "Range": "40 km", "Guidance": "Unguided", "Origin": "KRL", "Status": "Active" } },
                            { id: "sh15", name: "SH-15", role: "SP Howitzer", specs: { "Caliber": "155mm / 52 Cal", "Range": "53km (V-LAP)", "Rate": "4-6 rpm", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "m109a5", name: "M109A5", role: "SP Howitzer", specs: { "Caliber": "155mm", "Range": "30km", "Rate": "4 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m109a2", name: "M109A2", role: "SP Howitzer", specs: { "Caliber": "155mm", "Range": "24km", "Rate": "3 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m110", name: "M110", role: "SP Howitzer", specs: { "Caliber": "203mm", "Range": "29km", "Rate": "1 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "panter", name: "Panter", role: "Towed Howitzer", specs: { "Caliber": "155mm", "Range": "40km", "Rate": "6 rpm", "Origin": "Turkey/Pak", "Status": "Active" } },
                            { id: "m198", name: "M198", role: "Towed Howitzer", specs: { "Caliber": "155mm", "Range": "30km", "Rate": "4 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m115", name: "M115", role: "Towed Howitzer", specs: { "Caliber": "203mm", "Range": "16km", "Rate": "1 rpm", "Origin": "USA", "Status": "Reserve" } },
                             { id: "yarmuk", name: "Yarmuk", role: "MLRS", specs: { "Caliber": "122mm", "Range": "40km", "Rate": "40 rnd/20s", "Origin": "Indigenous", "Status": "Active" } }
                        ] 
                    },
                    infantry_arms: {
                        name: "Infantry Weapons",
                        items: [
                            { id: "bw20", name: "BW-20", role: "Assault Rifle", specs: { "Caliber": "5.56 / 7.62mm", "Range": "400m", "Action": "Roller Delayed", "Mag": "30 Round", "Origin": "POF (Indigenous)" } },
                            { id: "g3a3", name: "G3A3", role: "Battle Rifle", specs: { "Caliber": "7.62x51mm", "Range": "400m Effective", "Action": "Roller Delayed", "Mag": "20 Round", "Origin": "POF (License)" } },
                            { id: "type56", name: "Type 56-1", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "300m", "Action": "Gas Operated", "Mag": "30 Round", "Origin": "China/Pak" } },
                            { id: "cw39", name: "CW-39", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "400m", "Action": "Roller Delayed", "Mag": "30 Round", "Origin": "POF" } },
                            { id: "ak103", name: "AK-103", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "500m", "Action": "Gas Operated", "Mag": "30 Round", "Origin": "Russia" } },
                            { id: "m4a1", name: "M4A1", role: "Carbine", specs: { "Caliber": "5.56mm", "Range": "500m", "Action": "Gas Impingement", "Mag": "30 Round", "Origin": "USA" } },
                            { id: "mg3", name: "MG3", role: "GPMG", specs: { "Caliber": "7.62x51mm", "Range": "1200m", "Action": "Recoil Operated", "Mag": "Belt Fed", "Origin": "POF" } },
                            { id: "pk16", name: "PK-16", role: "HMG", specs: { "Caliber": "12.7mm", "Range": "2000m", "Action": "Recoil Operated", "Mag": "Belt Fed", "Origin": "POF" } },
                            { id: "psr90", name: "PSR-90", role: "Sniper Rifle", specs: { "Caliber": "7.62x51mm", "Range": "800m", "Action": "Bolt Action", "Mag": "5 Round", "Origin": "POF" } },
                            { id: "pk9", name: "PK-9", role: "Pistol", specs: { "Caliber": "9mm", "Range": "50m", "Action": "Short Recoil", "Mag": "15 Round", "Origin": "POF" } },
                            { id: "rpg29", name: "RPG-29 Vampir", role: "Anti-Tank", specs: { "Caliber": "105mm", "Range": "500m", "Action": "Single Shot", "Mag": "1 Round", "Origin": "Russia/Pak" } },
                            { id: "kornet", name: "Kornet-E", role: "ATGM", specs: { "Caliber": "152mm", "Range": "5.5 km", "Action": "Laser Beam", "Mag": "1 Round", "Origin": "Russia" } },
                            { id: "bakhtar", name: "Bakhtar Shikan", role: "ATGM", specs: { "Caliber": "120mm", "Range": "3-4 km", "Action": "Wire SACLOS", "Mag": "1 Round", "Origin": "KRL" } },
                            { id: "tow2", name: "BGM-71 TOW", role: "ATGM", specs: { "Caliber": "152mm", "Range": "3.75 km", "Action": "Wire Guided", "Mag": "1 Round", "Origin": "USA" } },
                            { id: "anza3", name: "Anza Mk-III", role: "MANPADS", specs: { "Caliber": "72mm", "Range": "6km", "Action": "IR Homing", "Mag": "1 Round", "Origin": "KRL" } }
                        ]
                    }
                } 
            },
            airforce: { 
                name: "Pakistan Air Force", color: "text-tac-blue", accent: "#38bdf8", 
                cats: { 
                    fighters: { 
                        name: "Fighter Fleet", 
                        items: [
                            { id: "j10c", name: "J-10C Dragon", role: "Omni-Role", specs: { "Role": "Air Superiority", "Speed": "Mach 1.8", "Radar": "KLJ-7A AESA", "Armament": "PL-15/PL-10", "Range": "1850 km", "Origin": "China" } },
                            { id: "jf173", name: "JF-17 Block III", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 1.6", "Radar": "KLJ-7A AESA", "Armament": "PL-15/PL-10", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "jf172", name: "JF-17 Block II", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 1.6", "Radar": "KLJ-7 V2", "Armament": "SD-10/C-802", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "jf171", name: "JF-17 Block I", role: "Multi-Role", specs: { "Role": "Air Defense", "Speed": "Mach 1.6", "Radar": "KLJ-7 V1", "Armament": "SD-10", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "f16c", name: "F-16C/D Blk 52", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 2.0", "Radar": "APG-68(V)9", "Armament": "AIM-120C-5", "Range": "3200 km (Ferry)", "Origin": "USA" } },
                             { id: "f16a", name: "F-16A/B MLU", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 2.0", "Radar": "APG-66(V)2", "Armament": "AIM-120C-5", "Range": "3200 km (Ferry)", "Origin": "USA" } },
                            { id: "mirage_rose", name: "Mirage ROSE", role: "Strike", specs: { "Role": "Deep Strike", "Speed": "Mach 2.2", "Radar": "Grifo-M3", "Armament": "Ra'ad/H-4", "Range": "1500 km", "Origin": "France/Pak" } },
                             { id: "mirage5", name: "Mirage 5 PA", role: "Maritime Strike", specs: { "Role": "Anti-Ship", "Speed": "Mach 2.2", "Radar": "Agave", "Armament": "Exocet", "Range": "1500 km", "Origin": "France" } },
                            { id: "f7pg", name: "F-7PG", role: "Interceptor", specs: { "Role": "Point Defense", "Speed": "Mach 2.0", "Radar": "Grifo-7", "Armament": "AIM-9", "Range": "850 km", "Origin": "China" } }
                        ] 
                    }, 
                    special: { 
                        name: "Special Mission & UAVs", 
                        items: [
                             { id: "shahpar3", name: "Shahpar-III", role: "MALE UCAV", specs: { "Role": "Strike/Recce", "Speed": "Unknown", "Armament": "6 Hardpoints", "Endurance": "20 Hours", "Origin": "GIDS" }, desc: "Group 4+ UCAV with heavy payload and SATCOM capability, inducted into active service." },
                            { id: "zdk03", name: "ZDK-03 Karakoram", role: "AEW&C", specs: { "Role": "AEW&C", "Radar": "AESA Rotodome", "Range": "450km (Detect)", "Platform": "Y-8F600", "Origin": "China" } },
                            { id: "erieye", name: "Saab 2000 Erieye", role: "AEW&C", specs: { "Role": "AEW&C", "Radar": "PS-890 AESA", "Range": "450km (Detect)", "Platform": "Saab 2000", "Origin": "Sweden" } },
                            { id: "falcon", name: "DA-20 Falcon", role: "EW/ELINT", specs: { "Role": "EW/Jamming", "Radar": "Classified", "Range": "Unknown", "Platform": "Falcon 20", "Origin": "France/Pak" } },
                             { id: "il78", name: "Il-78 Midas", role: "Tanker", specs: { "Role": "Refueling", "Radar": "Wx Radar", "Range": "Strategic", "Platform": "Il-76", "Origin": "Ukraine" } },
                            { id: "akinci", name: "Bayraktar Akƒ±ncƒ±", role: "HALE UCAV", specs: { "Role": "Strategic Strike", "Endurance": "24h", "Ceiling": "40k ft", "Payload": "1.3 Tons", "Origin": "Turkey" } },
                             { id: "tb2", name: "Bayraktar TB2", role: "MALE UCAV", specs: { "Role": "Strike/SEAD", "Endurance": "27h", "Ceiling": "25k ft", "Payload": "150 kg", "Origin": "Turkey" } },
                            { id: "shahpar2", name: "Shahpar-II", role: "MALE UCAV", specs: { "Role": "Recce/Strike", "Endurance": "14h", "Ceiling": "23k ft", "Payload": "Burq-II", "Origin": "GIDS" } },
                             { id: "wingloong", name: "Wing Loong II", role: "MALE UCAV", specs: { "Role": "Strike", "Endurance": "32h", "Ceiling": "32k ft", "Payload": "480 kg", "Origin": "China" } },
                            { id: "ch4", name: "CH-4", role: "MALE UCAV", specs: { "Role": "Strike", "Endurance": "30h", "Ceiling": "23k ft", "Payload": "345 kg", "Origin": "China" } }
                        ] 
                    },
                    trainers: {
                        name: "Trainers",
                        items: [
                            { id: "k8", name: "K-8 Karakoram", role: "Jet Trainer", specs: { "Role": "Intermediate", "Speed": "800 km/h", "Radar": "None", "Armament": "Pods", "Origin": "PAC/China" } },
                            { id: "t37", name: "T-37 Tweet", role: "Jet Trainer", specs: { "Role": "Basic Jet", "Speed": "680 km/h", "Radar": "None", "Armament": "None", "Origin": "USA" } },
                            { id: "mushshak", name: "Super Mushshak", role: "Prop Trainer", specs: { "Role": "Primary", "Speed": "268 km/h", "Radar": "None", "Armament": "None", "Origin": "PAC" } }
                        ]
                    },
                    munitions: {
                        name: "Standoff Weapons",
                        items: [
                            { id: "pl15", name: "PL-15", role: "LRAAM", specs: { "Range": "145km+", "Guidance": "AESA Seeker", "Warhead": "HE Frag", "Propulsion": "Dual Pulse", "Origin": "China" } },
                            { id: "aim120", name: "AIM-120C-5", role: "AMRAAM", specs: { "Range": "105km", "Guidance": "Active Radar", "Warhead": "HE Blast", "Propulsion": "Solid", "Origin": "USA" } },
                            { id: "sd10", name: "SD-10A", role: "BVR Missile", specs: { "Range": "100km", "Guidance": "Active Radar", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "pl10", name: "PL-10", role: "SRAAM", specs: { "Range": "20km", "Guidance": "IIR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "aim9", name: "AIM-9M", role: "Sidewinder", specs: { "Range": "18km", "Guidance": "IR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "USA" } },
                            { id: "raadz", name: "Ra'ad", role: "ALCM", specs: { "Range": "350km", "Guidance": "INS/GPS", "Warhead": "Nuc/HE", "Propulsion": "Turbojet", "Origin": "AWC" } },
                            { id: "h4", name: "H-4 SOW", role: "Glide Bomb", specs: { "Range": "120km", "Guidance": "TV/IR", "Warhead": "HE", "Propulsion": "Glide", "Origin": "NESCOM" } },
                             { id: "takbir", name: "Takbir", role: "Glide Bomb", specs: { "Range": "8km", "Guidance": "Satellite", "Warhead": "250kg", "Propulsion": "Glide", "Origin": "GIDS" } },
                            { id: "cm400", name: "CM-400AKG", role: "Anti-Ship", specs: { "Range": "400km", "Guidance": "Radar/IR", "Warhead": "Penetrator", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "bkd", name: "BKD-1", role: "Bunker Buster", specs: { "Range": "Drop", "Guidance": "Laser", "Warhead": "Deep Pen", "Propulsion": "Gravity", "Origin": "AWC" } },
                            { id: "burq2", name: "Burq-II", role: "AGM", specs: { "Range": "10 km", "Guidance": "Laser", "Warhead": "HE Anti-Tank", "Propulsion": "Solid", "Origin": "NESCOM" } }
                        ]
                    },
                    asymmetric_air: {
                        name: "Tactical & Loitering",
                        items: [
                            { id: "kemankes", name: "Kemankes", role: "Mini Cruise", specs: { "Range": "200km+", "Guidance": "AI Optical", "Warhead": "HE", "Propulsion": "Jet", "Origin": "Turkey" } },
                            { id: "kagem", name: "KaGeM", role: "Loitering", specs: { "Range": "Unknown", "Guidance": "Man-in-loop", "Warhead": "Blast Frag", "Propulsion": "Prop", "Origin": "Turkey/Pak" } }
                        ]
                    }
                } 
            },
            navy: { 
                name: "Pakistan Navy", color: "text-cyan-400", accent: "#22d3ee", 
                cats: { 
                    surface: { 
                        name: "Surface Fleet", 
                        items: [
                            { id: "054ap", name: "Tughril Class", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "4200 Tons", "Missiles": "CM-302/LY-80N", "Speed": "27 Knots", "Origin": "China", "Status": "Active" } },
                            { id: "babur", name: "Babur Class", role: "Corvette", specs: { "Role": "Patrol/ASW", "Displacement": "3000 Tons", "Missiles": "Harbah/Albatros", "Speed": "29 Knots", "Origin": "Turkey/Pak", "Status": "Active" } },
                            { id: "f22p", name: "Zulfiquar Class", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "3100 Tons", "Missiles": "C-802/FM-90", "Speed": "29 Knots", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "alamgir", name: "PNS Alamgir", role: "Frigate", specs: { "Role": "ASW", "Displacement": "4100 Tons", "Missiles": "Harpoon", "Speed": "29 Knots", "Origin": "USA", "Status": "Active" } },
                            { id: "tariq", name: "Tariq Class", role: "Frigate", specs: { "Role": "Patrol", "Displacement": "3200 Tons", "Missiles": "Harpoon", "Speed": "30 Knots", "Origin": "UK", "Status": "Phasing Out" } },
                             { id: "yarmook", name: "Yarmook Class", role: "OPV", specs: { "Role": "Patrol", "Displacement": "2300 Tons", "Missiles": "Fitted For", "Speed": "24 Knots", "Origin": "Damen", "Status": "Active" } },
                            { id: "azmat", name: "Azmat Class", role: "FAC(M)", specs: { "Role": "Fast Attack", "Displacement": "560 Tons", "Missiles": "8x C-802A", "Speed": "30 Knots", "Origin": "KS&EW", "Status": "Active" } },
                            { id: "jurrat", name: "Jurrat Class", role: "Missile Boat", specs: { "Role": "Coastal", "Displacement": "250 Tons", "Missiles": "C-802", "Speed": "30 Knots", "Origin": "KS&EW", "Status": "Active" } },
                            { id: "munsif", name: "Munsif Class", role: "Minehunter", specs: { "Role": "MCMV", "Displacement": "500 Tons", "Missiles": "None", "Speed": "15 Knots", "Origin": "France", "Status": "Active" } }
                        ] 
                    },
                    subs: {
                        name: "Submarines",
                        items: [
                            { id: "hangor", name: "Hangor Class", role: "AIP SSK", specs: { "Role": "Attack/Strike", "Displacement": "2800 Tons", "Armament": "Babur-3/Yu-6", "Propulsion": "Stirling AIP", "Origin": "China/Pak", "Status": "Building" } },
                            { id: "agosta90b", name: "Agosta 90B", role: "AIP SSK", specs: { "Role": "Attack/Strike", "Displacement": "2050 Tons", "Armament": "Harpoon/Exocet", "Propulsion": "MESMA AIP", "Origin": "France/Pak", "Status": "Active" } },
                            { id: "agosta70", name: "Agosta 70", role: "SSK", specs: { "Role": "Hunter Killer", "Displacement": "1700 Tons", "Armament": "Harpoon", "Propulsion": "Diesel Electric", "Origin": "France", "Status": "Active" } },
                            { id: "xcraft", name: "X-Craft", role: "Midget Sub", specs: { "Role": "SOF Ops", "Displacement": "100 Tons", "Armament": "Torpedoes", "Propulsion": "Electric", "Origin": "KS&EW", "Status": "Active" } }
                        ]
                    },
                    aviation: {
                        name: "Naval Aviation",
                        items: [
                            { id: "seasultan", name: "Sea Sultan", role: "LRMP", specs: { "Role": "ASW/ASuW", "Speed": "Mach 0.82", "Range": "Strategic", "Armament": "Torpedoes/Missiles", "Origin": "Pak/Italy" } },
                            { id: "p3c", name: "P-3C Orion", role: "LRMP", specs: { "Role": "ASW", "Speed": "750 km/h", "Range": "4400 km", "Armament": "Harpoon", "Origin": "USA" } },
                            { id: "atr72", name: "ATR-72 MPA", role: "MPA", specs: { "Role": "Patrol/ASW", "Speed": "500 km/h", "Range": "1500 km", "Armament": "Torpedoes", "Origin": "Germany/Italy" } },
                            { id: "seaking", name: "Sea King", role: "ASW Helo", specs: { "Role": "ASW/SAR", "Speed": "208 km/h", "Range": "1200 km", "Armament": "Exocet", "Origin": "UK" } },
                            { id: "z9ec", name: "Z-9EC", role: "ASW Helo", specs: { "Role": "ASW", "Speed": "280 km/h", "Range": "400 km", "Armament": "Torpedoes", "Origin": "China" } },
                            { id: "luna", name: "Luna NG", role: "UAV", specs: { "Role": "Recon", "Speed": "100 km/h", "Range": "100 km", "Armament": "None", "Origin": "Germany" } }
                        ]
                    },
                    coastal: {
                        name: "Coastal Defense",
                        items: [
                            { id: "zarb", name: "Zarb", role: "Anti-Ship", specs: { "Range": "300km", "Warhead": "HE", "Guidance": "Active Radar", "Platform": "Land Truck", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "harbah", name: "Harbah", role: "Cruise", specs: { "Range": "700km", "Warhead": "HE", "Guidance": "Active Radar", "Platform": "Land/Ship", "Origin": "GIDS", "Status": "Active" } }
                        ]
                    }
                } 
            },
            logistics: { 
                name: "Logistics", color: "text-white", accent: "#ffffff", 
                cats: { 
                    vehicles: { 
                        name: "Transport & Aux", 
                        items: [
                            { id: "hino", name: "Hino Truck", role: "Logistics", specs: { "Type": "Transport", "Drive": "6x6", "Usage": "General", "Origin": "Indigenous" } },
                             { id: "yakhlaq", name: "Yakhlaq", role: "Logistics", specs: { "Type": "Heavy Transport", "Drive": "8x8", "Usage": "Tank Carrier", "Origin": "HIT" } },
                            { id: "unimog", name: "Unimog", role: "Utility", specs: { "Type": "Utility", "Drive": "4x4", "Usage": "High Altitude", "Origin": "Germany" } },
                             { id: "landrover", name: "Land Rover", role: "Utility", specs: { "Type": "Utility", "Drive": "4x4", "Usage": "Comms/Staff", "Origin": "UK/Pak" } },
                             { id: "tanker", name: "Fuel Bowser", role: "Logistics", specs: { "Type": "Supply", "Drive": "6x6", "Usage": "Fuel", "Origin": "Indigenous" } },
                            { id: "recovery", name: "M88 Recovery", role: "ARV", specs: { "Type": "Recovery", "Drive": "Tracked", "Usage": "Tank Repair", "Origin": "USA" } },
                             { id: "alhadid", name: "Al-Hadid", role: "ARV", specs: { "Type": "Recovery", "Drive": "Tracked", "Usage": "APC Repair", "Origin": "HIT" } }
                        ] 
                    },
                    naval_aux: {
                         name: "Naval Auxiliaries",
                        items: [
                            { id: "moawin", name: "PNS Moawin", role: "Fleet Tanker", specs: { "Type": "Replenishment", "Tonnage": "17000t", "Usage": "Fleet Support", "Origin": "KS&EW" } },
                            { id: "nasr_ship", name: "PNS Nasr", role: "Replenishment", specs: { "Type": "Tanker", "Tonnage": "15000t", "Usage": "Fuel", "Origin": "China" } },
                            { id: "behr", name: "Behr Masah", role: "Survey", specs: { "Type": "Hydrography", "Tonnage": "3000t", "Usage": "Mapping", "Origin": "China" } },
                             { id: "madadgar", name: "Madadgar", role: "Utility", specs: { "Type": "Coastal", "Tonnage": "Small", "Usage": "Logistics", "Origin": "Pak" } }
                        ]
                    },
                     gear: {
                        name: "General Gear",
                        items: [
                            { id: "vest", name: "Body Armor", role: "Protection", specs: { "Type": "Plate Carrier", "Level": "NIJ IV", "Material": "Ceramic", "Origin": "GIDS" } },
                            { id: "helmet", name: "Ballistic Helmet", role: "Protection", specs: { "Type": "ACH/High Cut", "Level": "NIJ IIIA", "Material": "Kevlar/Composite", "Origin": "GIDS" } },
                             { id: "nvg", name: "Night Vision", role: "Optics", specs: { "Type": "Monocular", "Gen": "3", "Tech": "IIT", "Origin": "IEP" } }
                        ]
                    }
                } 
            },
            industry: { 
                name: "Industry", color: "text-purple-500", accent: "#a855f7", 
                cats: { 
                    giants: { 
                        name: "Major Complexes", 
                        items: [
                            { id: "nastp", name: "NASTP", role: "Tech Park", specs: { "Domain": "Cyber/EW/Space", "Product": "Software/Design", "Location": "Rawalpindi", "Type": "Strategic" } },
                            { id: "pac", name: "PAC Kamra", role: "Aviation", specs: { "Domain": "Aerospace", "Product": "JF-17 Thunder", "Location": "Kamra", "Type": "State Owned" } },
                            { id: "hit", name: "HIT Taxila", role: "Land Systems", specs: { "Domain": "Armor", "Product": "Al-Khalid/VT-4", "Location": "Taxila", "Type": "State Owned" } },
                             { id: "gids", name: "GIDS", role: "R&D", specs: { "Domain": "Electronics/UAV", "Product": "Shahpar/Fatah", "Location": "Rawalpindi", "Type": "Conglomerate" } },
                            { id: "pof", name: "POF Wah", role: "Ordnance", specs: { "Domain": "Ammo/Arms", "Product": "G3/Ammo", "Location": "Wah Cantt", "Type": "State Owned" } },
                             { id: "ksew", name: "Karachi Shipyard", role: "Naval", specs: { "Domain": "Shipbuilding", "Product": "Subs/Frigates", "Location": "Karachi", "Type": "State Owned" } },
                             { id: "nrtc", name: "NRTC", role: "Electronics", specs: { "Domain": "Comms", "Product": "Radios/Jammers", "Location": "Haripur", "Type": "State Owned" } },
                            { id: "nescom", name: "NESCOM", role: "Strategic", specs: { "Domain": "Missiles", "Product": "Shaheen/Babur", "Location": "Islamabad", "Type": "State Owned" } }
                        ] 
                    } 
                } 
            },
            future: { 
                name: "FUTURE PROJECTS & R&D", color: "text-purple-500", accent: "#a855f7", 
                cats: { 
                    future_aerospace: { 
                        name: "Future Aerospace", 
                        items: [
                            { id: "pfx", name: "PF-X (Project Azm)", role: "5th Gen Fighter", specs: { "Role": "Air Dominance", "Speed": "Mach 2.0+", "Radar": "Advanced AESA", "Armament": "Internal Bays", "Origin": "PAC/AWC" }, desc: "Next-generation stealth fighter program designed for air superiority." },
                            { id: "jf17_blk4", name: "JF-17 Block 4", role: "Next Gen", specs: { "Role": "Stealthy Multi-Role", "Speed": "Mach 1.8+", "Radar": "Indigenous AESA (GaN)", "Armament": "FAAZ-2", "Range": "Extended", "Origin": "PAC/AWC" } }
                        ] 
                    },
                    future_missiles: { 
                        name: "Future Missiles", 
                        items: [
                            { id: "p282", name: "P-282", role: "Hypersonic", specs: { "Range": "350 km", "Warhead": "Anti-Ship/Land", "Guidance": "Advanced Inertial", "Propulsion": "Solid (Mach 5+)", "Origin": "NESCOM" } },
                            { id: "fatah5", name: "Fatah-5", role: "Long Range GMLRS", specs: { "Range": "1000 km", "Guidance": "Inertial/Satellite", "Warhead": "Unitary/Cluster", "Origin": "GIDS", "Status": "Development (2026)" }, desc: "Expected 1000km range guided rocket system for the Army Rocket Force Command." },
                            { id: "faaz2", name: "FAAZ-2", role: "BVR AAM", specs: { "Range": "180 km", "Guidance": "Active RF/IIR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "GIDS" } },
                            { id: "taimoor", name: "Taimoor", role: "ALCM", specs: { "Range": "600 km", "Warhead": "Conventional/Nuc", "Guidance": "Stealth/Terrain", "Propulsion": "Turbofan", "Origin": "Indigenous" } },
                             { id: "lomads", name: "GIDS LOMADS", role: "LOMADS", specs: { "Range": "100 km", "Guidance": "Active Radar", "Ceiling": "20 km", "Radar": "AESA", "Origin": "GIDS" } },
                            { id: "faazsl", name: "FAAZ-SL", role: "E-SHORADS", specs: { "Range": "25 km", "Guidance": "Active RF/IIR", "Ceiling": "8 km", "Mount": "Mobile", "Origin": "GIDS" } }
                        ] 
                    },
                    future_land: { 
                        name: "Future Land Systems", 
                        items: [
                            { id: "faaris", name: "Faaris APC", role: "APC", specs: { "Gun": "12.7mm/14.5mm", "Engine": "Diesel", "Armor": "B7", "Speed": "100 km/h", "Origin": "GIDS" } },
                            { id: "hamza8", name: "Hamza 8x8", role: "IFV", specs: { "Gun": "30mm Cannon", "Engine": "600hp", "Armor": "STANAG 4", "Speed": "100 km/h", "Origin": "HIT" } }
                        ] 
                    },
                    future_naval: { 
                        name: "Future Naval", 
                        items: [
                            { id: "jinnah_frigate", name: "Jinnah Class Frigate", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "3300 Tons", "Missiles": "VLS/Harbah", "Speed": "26+ Knots", "Origin": "KSEW (Indigenous)" }, desc: "Indigenously designed frigate project." }
                        ] 
                    },
                    future_ew: {
                        name: "Future EW & Cyber",
                        items: [
                            { id: "zarbsamaa", name: "Zarb-e-Samaa", role: "AWACS", specs: { "Role": "AEW&C", "Radar": "Indigenous AESA", "Range": "450km+", "Platform": "Lineage 1000E", "Origin": "PAC/GIDS" } },
                            { id: "global6000", name: "Global 6000 SOJ", role: "EW/SOJ", specs: { "Role": "Stand-off Jammer", "Radar": "Havelsan Suite", "Range": "Global", "Platform": "Bombardier", "Origin": "Pak/Turkey" } },
                            { id: "aesa", name: "Indigenous AESA", role: "Radar", specs: { "Type": "GaN Module", "Status": "Testing", "Range": "Long", "Goal": "JF-17 Blk 4" } }
                        ] 
                    },
                    future_drones: {
                        name: "Future Drones",
                        items: [
                            { id: "arrow1", name: "Arrow-1", role: "Loitering", specs: { "Type": "Munition", "Status": "R&D", "Range": "Long", "Goal": "Precision" } }
                        ]
                    }
                } 
            }
        };
        
        // ... (App Logic)
    </script>
</body>
</html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SENTINEL ANALYTICS | INTELLIGENCE DASHBOARD</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Oswald:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Remapping existing DB keys to the new Professional Palette
                        'neon-blue': '#3b82f6',   // International Blue
                        'neon-green': '#10b981',  // Emerald (Active)
                        'neon-amber': '#f59e0b',  // Amber (Strategic)
                        'neon-red': '#ef4444',    // Muted Red (Danger)
                        'neon-purple': '#6366f1', // Indigo (R&D/Ind)
                        'cyan-400': '#0ea5e9',    // Sky Blue (Naval)
                        
                        // New Structural Colors
                        'mil-bg': '#0f172a',      // Deep Slate
                        'mil-panel': '#1e293b',   // Slate 800
                        'mil-border': '#334155',  // Slate 700
                        'mil-text': '#94a3b8',    // Slate 400
                        'mil-light': '#f8fafc',   // Slate 50
                    },
                    fontFamily: {
                        'header': ['Oswald', 'sans-serif'],
                        'body': ['Inter', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                    backgroundImage: {
                        'grid': "linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px)",
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: #0f172a; 
            color: #94a3b8; 
            height: 100dvh; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            font-family: 'Inter', sans-serif;
        }
        
        /* Subtle Technical Grid */
        .bg-grid { background-size: 40px 40px; }
        
        /* Professional Panel - Flat, Solid, Bordered */
        .glass {
            background: #1e293b;
            border: 1px solid #334155;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        /* Hover Effect - Solid Highlight, No Float/Glow */
        .float-card {
            transition: border-color 0.2s ease, background-color 0.2s ease;
        }
        .float-card:hover {
            border-color: #3b82f6;
            background-color: #253045;
            transform: none; /* Removed floating */
            box-shadow: none; /* Removed glow */
        }
        
        /* Chart Container */
        .chart-wrapper { position: relative; height: 300px; width: 100%; }

        /* Professional Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .fade-in { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Sidebar Navigation Items */
        .nav-btn {
            display: flex; align-items: center; justify-content: space-between;
            padding: 0.75rem 1rem; 
            margin-bottom: 1px;
            border-radius: 0;
            border-left: 3px solid transparent;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            font-size: 0.75rem; 
            color: #94a3b8;
            transition: all 0.15s;
            cursor: pointer;
            letter-spacing: 0.05em;
        }
        .nav-btn:hover { 
            background-color: #334155; 
            color: #f8fafc; 
            border-left-color: #3b82f6;
            padding-left: 1rem; /* Keep padding stable */
        }

        #viewport { padding-top: 3.5rem; }
        #mobileMenu { transition: transform 0.2s cubic-bezier(0.16, 1, 0.3, 1); transform: translateY(100%); }
        #mobileMenu.active { transform: translateY(0); }

        /* Hide Search Input Extras */
        input[type="search"]::-webkit-search-decoration,
        input[type="search"]::-webkit-search-cancel-button,
        input[type="search"]::-webkit-search-results-button,
        input[type="search"]::-webkit-search-results-decoration {
            display: none !important;
            -webkit-appearance: none !important;
        }
    </style>
</head>
<body class="bg-grid">

    <div id="disclaimerModal" class="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-sm fade-in">
        <div class="w-full max-w-md bg-slate-800 border border-slate-600 shadow-xl flex flex-col p-0">
            <div class="bg-slate-900 p-4 border-b border-slate-600 flex items-center gap-3">
                <div class="w-3 h-3 bg-amber-500 rounded-full"></div>
                <h2 class="text-sm font-header tracking-widest text-white uppercase">Security Clearance Required</h2>
            </div>
            <div class="p-6">
                <p class="text-slate-300 font-sans text-xs leading-relaxed mb-6 text-justify">
                    <strong>NOTICE TO USER:</strong> You are accessing the Sentinel Defense Analytics Database. 
                    All data presented within this interface is aggregated from Open Source Intelligence (OSINT) and public domain records. 
                    Technical specifications are estimates based on unclassified analysis.
                </p>
                <div class="p-3 bg-slate-900/50 border border-slate-700 mb-6">
                    <p class="text-[10px] font-mono text-slate-500 uppercase">Class: UNCLASSIFIED // PUBLIC RELEASE</p>
                </div>
                <button onclick="document.getElementById('disclaimerModal').remove()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium text-sm py-2.5 rounded-sm transition-colors uppercase tracking-wide">
                    Acknowledge & Proceed
                </button>
            </div>
        </div>
    </div>

    <header class="fixed top-0 left-0 w-full h-14 border-b border-slate-700 bg-slate-900 flex items-center justify-between px-6 z-[100]">
        <div class="flex items-center gap-4 cursor-pointer" onclick="app.view('home')">
            <div class="w-8 h-8 bg-blue-600 flex items-center justify-center rounded-sm">
                <span class="text-white font-bold text-lg font-header">S</span>
            </div>
            <div class="leading-none">
                <h1 class="text-lg text-white font-header tracking-wide">SENTINEL <span class="text-blue-500">ANALYTICS</span></h1>
                <div class="text-[10px] text-slate-500 font-mono tracking-widest uppercase">Global Defense Database</div>
            </div>
        </div>
        
        <div class="flex-1 max-w-xl mx-8 hidden md:block relative group">
            <input type="search" id="desktopSearch" placeholder="SEARCH DATABASE..." 
                class="w-full bg-slate-950 border border-slate-700 rounded-sm px-4 py-1.5 text-xs font-mono text-white focus:outline-none focus:border-blue-500 focus:bg-slate-900 transition-all placeholder-slate-600"
                oninput="app.search(this.value)">
            <button id="desktopClearBtn" onmousedown="event.preventDefault(); app.clearSearch('desktop')" class="absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white hidden transition-colors z-10 p-1">‚úï</button>
        </div>

        <button class="md:hidden text-blue-500 p-2" onclick="app.toggleMobileSearch()">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
        </button>

        <div class="hidden sm:flex flex-col items-end">
            <div class="text-[10px] text-slate-500 font-bold tracking-wider">SYSTEM STATUS</div>
            <div class="text-[10px] text-emerald-500 font-mono flex items-center gap-1.5">
                <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span> ONLINE
            </div>
        </div>
    </header>

    <div id="mobileSearch" class="hidden fixed top-14 left-0 w-full bg-slate-900 border-b border-slate-700 p-4 z-[90] flex gap-2">
        <div class="relative flex-1">
            <input type="search" id="mobileSearchInput" placeholder="SEARCH..." 
                class="w-full bg-slate-950 border border-slate-700 rounded-sm px-4 py-2 text-white font-mono text-sm focus:outline-none focus:border-blue-500"
                oninput="app.search(this.value)">
            <button id="mobileClearBtn" onmousedown="event.preventDefault(); app.clearSearch('mobile')" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white hidden z-10 p-2">‚úï</button>
        </div>
        <button class="text-xs font-bold text-slate-400 border border-slate-700 px-3 py-2 rounded-sm hover:bg-slate-800 hover:text-white" onclick="app.closeMobileSearch()">CANCEL</button>
    </div>

    <div class="flex flex-1 overflow-hidden relative pt-14">
        <aside class="hidden md:flex w-64 bg-slate-900 border-r border-slate-700 flex-col z-40 h-full shrink-0">
            <div class="p-4 border-b border-slate-700 text-center font-header text-slate-500 text-xs tracking-[0.2em]">COMMAND MENU</div>
            <nav class="flex-1 overflow-y-auto py-2 custom-scrollbar">
                <div class="text-[10px] text-slate-500 font-bold px-4 py-2 uppercase tracking-wider mt-2">Combat Systems</div>
                <button onclick="app.view('nuclear')" class="nav-btn hover:border-l-amber-500">STRATEGIC COMMAND</button>
                <button onclick="app.view('army')" class="nav-btn hover:border-l-emerald-500">LAND FORCES</button>
                <button onclick="app.view('airforce')" class="nav-btn hover:border-l-blue-500">AIR FORCE</button>
                <button onclick="app.view('navy')" class="nav-btn hover:border-l-cyan-400">NAVAL FORCES</button>
                
                <div class="text-[10px] text-slate-500 font-bold px-4 py-2 uppercase tracking-wider mt-6">Support & Dev</div>
                <button onclick="app.view('logistics')" class="nav-btn hover:border-l-slate-200">LOGISTICS</button>
                <button onclick="app.view('industry')" class="nav-btn hover:border-l-indigo-500">INDUSTRIAL BASE</button>
                <button onclick="app.view('future')" class="nav-btn hover:border-l-indigo-500">R&D / FUTURE PROJECTS</button>
            </nav>
            <div class="p-4 border-t border-slate-700 text-[10px] text-slate-600 text-center font-mono">
                <span id="syncTime">00:00:00</span> UTC
            </div>
        </aside>

        <main id="viewport" class="flex-1 overflow-y-auto p-8 relative bg-slate-950 pb-24 custom-scrollbar scroll-smooth">
            </main>
        
        <button id="ghostArrow" onclick="app.scrollToTop()" class="absolute bottom-8 right-8 w-10 h-10 bg-slate-800 border border-slate-600 text-blue-500 flex items-center justify-center hover:bg-slate-700 hover:text-white transition-all duration-300 opacity-0 pointer-events-none shadow-lg">
            <span class="text-xl font-bold">‚Üë</span>
        </button>
    </div>

    <div id="mobileMenu" class="md:hidden fixed inset-0 z-[90] bg-slate-900/98 backdrop-blur-xl flex flex-col translate-y-full pt-14">
        <div class="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-900">
            <h2 class="text-lg font-header text-white tracking-widest">TACTICAL GRID</h2>
            <button onclick="app.toggleMobileMenu()" class="w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white">‚ñº</button>
        </div>
        <div class="p-4 overflow-y-auto grid grid-cols-2 gap-3 pb-20">
            <button onclick="app.viewMobile('nuclear')" class="p-4 bg-slate-800 border border-slate-700 hover:border-amber-500 text-left">
                <div class="text-2xl mb-1">‚ò¢</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">STRATEGIC</span>
            </button>
            <button onclick="app.viewMobile('army')" class="p-4 bg-slate-800 border border-slate-700 hover:border-emerald-500 text-left">
                <div class="text-2xl mb-1">üõ°</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">ARMY</span>
            </button>
            <button onclick="app.viewMobile('airforce')" class="p-4 bg-slate-800 border border-slate-700 hover:border-blue-500 text-left">
                <div class="text-2xl mb-1">‚úà</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">AIR FORCE</span>
            </button>
            <button onclick="app.viewMobile('navy')" class="p-4 bg-slate-800 border border-slate-700 hover:border-cyan-400 text-left">
                <div class="text-2xl mb-1">‚öì</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">NAVY</span>
            </button>
            <button onclick="app.viewMobile('logistics')" class="p-4 bg-slate-800 border border-slate-700 hover:border-white text-left">
                <div class="text-2xl mb-1">üì¶</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">LOGISTICS</span>
            </button>
            <button onclick="app.viewMobile('industry')" class="p-4 bg-slate-800 border border-slate-700 hover:border-indigo-500 text-left">
                <div class="text-2xl mb-1">üè≠</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">INDUSTRY</span>
            </button>
            <button onclick="app.viewMobile('future')" class="p-4 bg-slate-800 border border-slate-700 hover:border-indigo-500 text-left col-span-2">
                <div class="text-2xl mb-1">üî¨</div><span class="text-[10px] font-bold text-slate-300 tracking-wider">R&D / FUTURE</span>
            </button>
        </div>
    </div>

    <div class="md:hidden fixed bottom-0 w-full h-12 bg-slate-900 border-t border-slate-700 z-[80] flex items-center justify-center">
        <button onclick="app.toggleMobileMenu()" class="flex items-center gap-2 text-blue-500 font-header text-sm tracking-widest px-4 py-2 w-full justify-center hover:bg-slate-800">
            ‚ñ≤ OPEN GRID
        </button>
    </div>

    <script>
        setInterval(() => {
            const now = new Date();
            document.getElementById('syncTime').innerText = now.toLocaleTimeString('en-US', { hour12: false });
        }, 1000);

        // --- FULL DATABASE v60.0 ---
        // Colors mapped to new Palette in Tailwind Config
        const DB = {
            nuclear: { 
                name: "Strategic Command", color: "text-neon-amber", accent: "#f59e0b", 
                cats: { 
                    ballistic: { 
                        name: "Ballistic Missiles", 
                        items: [
                            { id: "shaheen3", name: "Shaheen-III", role: "MRBM", specs: { "Range": "2,750 km", "Warhead": "Nuclear/HE/EMP", "Guidance": "INS/GPS", "Propulsion": "Solid (2-Stage)", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ababeel", name: "Ababeel", role: "MIRV MRBM", specs: { "Range": "2,200 km", "Warhead": "MIRV (3-8 RVs)", "Guidance": "Inertial + Star", "Propulsion": "Solid (3-Stage)", "Origin": "KRL", "Status": "Active" } },
                            { id: "shaheen2", name: "Shaheen-II", role: "MRBM", specs: { "Range": "2,000 km", "Warhead": "Single (Nuc/HE)", "Guidance": "INS/GPS", "Propulsion": "Solid (2-Stage)", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ghauri", name: "Ghauri (Hatf-V)", role: "MRBM", specs: { "Range": "1,300 km", "Warhead": "700 kg", "Guidance": "Inertial", "Propulsion": "Liquid (TM-185)", "Origin": "KRL", "Status": "Active" } },
                            { id: "shaheen1a", name: "Shaheen-IA", role: "SRBM", specs: { "Range": "900 km", "Warhead": "Nuclear/HE", "Guidance": "Terminal Guidance", "Propulsion": "Solid", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "shaheen1", name: "Shaheen-I", role: "SRBM", specs: { "Range": "750 km", "Warhead": "Nuclear/HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "ghaznavi", name: "Ghaznavi", role: "SRBM", specs: { "Range": "290 km", "Warhead": "Nuclear/HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "abdali", name: "Abdali", role: "SRBM", specs: { "Range": "180 km", "Warhead": "Variable", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "nasr", name: "Nasr", role: "TNW", specs: { "Range": "70 km", "Warhead": "Sub-kiloton Nuke", "Guidance": "High Precision", "Propulsion": "Solid", "Origin": "NDC", "Status": "Active" } },
                            { id: "hatf1", name: "Hatf-I/IB", role: "BRBM", specs: { "Range": "100 km", "Warhead": "HE", "Guidance": "Inertial", "Propulsion": "Solid", "Origin": "KRL", "Status": "Active" } }
                        ] 
                    }, 
                    cruise: { 
                        name: "Strategic Cruise Missiles", 
                        items: [
                            { id: "babur3", name: "Babur-III", role: "SLCM", specs: { "Range": "450 km", "Warhead": "Nuclear", "Guidance": "TERCOM", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "babur2", name: "Babur-2", role: "GLCM", specs: { "Range": "700 km", "Warhead": "Nuclear/HE", "Guidance": "TERCOM/DSMAC", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "babur1b", name: "Babur-1B", role: "GLCM", specs: { "Range": "700 km", "Warhead": "Dual (Nuc/HE)", "Guidance": "INS/GPS", "Propulsion": "Turbofan", "Origin": "NESCOM", "Status": "Active" } },
                            { id: "raad2", name: "Ra'ad-II", role: "ALCM", specs: { "Range": "600 km", "Warhead": "Nuc/HE", "Guidance": "TERCOM", "Propulsion": "Turbofan", "Origin": "AWC", "Status": "Active" } },
                            { id: "raad1", name: "Ra'ad-I", role: "ALCM", specs: { "Range": "350 km", "Warhead": "Nuc/HE", "Guidance": "INS/GPS", "Propulsion": "Turbojet", "Origin": "AWC", "Status": "Active" } }
                        ] 
                    } 
                } 
            },
            army: { 
                name: "Pakistan Army", color: "text-neon-green", accent: "#10b981", 
                cats: { 
                    drones_loitering: {
                        name: "Loitering Munitions & Drones",
                        items: [
                             { id: "sarfarosh", name: "Sarfarosh", role: "Strategic Strike", specs: { "Range": "800 km", "Warhead": "HE/Anti-Radiation", "Guidance": "Advanced", "Propulsion": "Propeller", "Origin": "Indigenous", "Status": "Active" } },
                             { id: "blaze75", name: "Blaze-75", role: "Loitering", specs: { "Range": "500 km", "Warhead": "30 kg", "Guidance": "AI/EO/IR", "Propulsion": "Gasoline", "Origin": "GIDS", "Status": "Active" } },
                             { id: "blaze50", name: "Blaze-50", role: "Loitering", specs: { "Range": "180 km", "Warhead": "20 kg", "Guidance": "AI/EO/IR", "Propulsion": "Gasoline", "Origin": "GIDS", "Status": "Active" } },
                             { id: "blaze25", name: "Blaze-25", role: "Loitering", specs: { "Range": "75 km", "Warhead": "Anti-Tank", "Guidance": "Man-in-Loop", "Propulsion": "Electric", "Origin": "GIDS", "Status": "Active" } },
                             { id: "ababeel_v", name: "Ababeel-V", role: "Loitering", specs: { "Range": "Unknown", "Warhead": "HE", "Endurance": "4 Hours", "Origin": "GIDS", "Status": "Active" } },
                             { id: "burraq", name: "Burraq", role: "UCAV", specs: { "Role": "COIN/Strike", "Speed": "200 km/h", "Armament": "Barq Missile", "Endurance": "12 Hours", "Origin": "NESCOM", "Status": "Active" } }
                        ]
                    },
                    ad_army: { 
                        name: "Army Air Defense", 
                        items: [
                            { id: "hq9p", name: "HQ-9/P", role: "HIMADS", specs: { "Range": "250km", "Guidance": "Active Radar", "Ceiling": "27km", "Radar": "AESA", "Origin": "China", "Status": "Active" } },
                            { id: "ly80", name: "LY-80", role: "LOMADS", specs: { "Range": "70km", "Guidance": "Semi-Active", "Ceiling": "18km", "Radar": "IBIS-150", "Origin": "China", "Status": "Active" } },
                            { id: "spada", name: "Spada 2000", role: "LOMADS", specs: { "Range": "25km", "Guidance": "Semi-Active", "Ceiling": "14km", "Radar": "RAC-3D", "Origin": "Italy", "Status": "Active" } },
                            { id: "fm90", name: "FM-90", role: "SHORAD", specs: { "Range": "15km", "Guidance": "Command Line", "Ceiling": "6km", "Mount": "Mobile 6x6", "Origin": "China", "Status": "Active" } },
                            { id: "anza3", name: "Anza Mk-III", role: "MANPADS", specs: { "Range": "6km", "Guidance": "IR Homing", "Speed": "Mach 2", "Origin": "KRL", "Status": "Active" } },
                            { id: "rbs70", name: "RBS-70 NG", role: "MANPADS", specs: { "Range": "9km", "Guidance": "Laser Beam", "Speed": "Mach 2", "Origin": "Sweden", "Status": "Active" } },
                            { id: "mistral", name: "Mistral", role: "MANPADS", specs: { "Range": "6km", "Guidance": "IR Homing", "Speed": "Mach 2.5", "Origin": "France", "Status": "Active" } },
                            { id: "oerlikon", name: "Oerlikon GDF", role: "AAA", specs: { "Range": "4km", "Guidance": "Radar Control", "Speed": "1100 rpm", "Origin": "Switzerland", "Status": "Active" } },
                            { id: "zu23", name: "ZU-23-2", role: "AAA", specs: { "Range": "2.5km", "Guidance": "Optical", "Speed": "400 rpm", "Origin": "China/Pak", "Status": "Active" } }
                        ] 
                    },
                    aviation: {
                        name: "Army Aviation",
                        items: [
                            { id: "z10me", name: "Z-10ME", role: "Attack Helo", specs: { "Role": "Attack", "Speed": "270 km/h", "Armament": "AKD-10/23mm", "Range": "800 km", "Origin": "China" } },
                            { id: "mi35", name: "Mi-35M", role: "Assault Helo", specs: { "Role": "Attack/Transport", "Speed": "310 km/h", "Armament": "Shturm/23mm", "Range": "460 km", "Origin": "Russia" } },
                            { id: "cobra", name: "AH-1F/S Cobra", role: "Attack Helo", specs: { "Role": "Anti-Armor", "Speed": "277 km/h", "Armament": "TOW/20mm", "Range": "500 km", "Origin": "USA" } },
                            { id: "mi17", name: "Mi-171E", role: "Transport", specs: { "Role": "Utility", "Speed": "250 km/h", "Capacity": "24 Troops", "Range": "465 km", "Origin": "Russia" } },
                            { id: "puma", name: "SA330 Puma", role: "Transport", specs: { "Role": "Utility", "Speed": "257 km/h", "Capacity": "16 Troops", "Range": "580 km", "Origin": "France" } },
                            { id: "bell412", name: "Bell 412", role: "Transport", specs: { "Role": "VIP/Utility", "Speed": "260 km/h", "Capacity": "13 Pax", "Range": "980 km", "Origin": "USA" } },
                            { id: "ecureuil", name: "AS350 Ecureuil", role: "Light Utility", specs: { "Role": "High Altitude", "Speed": "287 km/h", "Capacity": "5 Pax", "Range": "660 km", "Origin": "France" } },
                            { id: "mushshak_a", name: "Mushshak", role: "Trainer", specs: { "Role": "Basic Trainer", "Speed": "238 km/h", "Capacity": "2 Seats", "Range": "800 km", "Origin": "PAC" } }
                        ]
                    },
                    armor: { 
                        name: "Armored Corps", 
                        items: [
                            { id: "vt4", name: "VT-4 Haider", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1200hp Diesel", "Armor": "Composite+FY-4 ERA", "Speed": "70 km/h", "Origin": "NORINCO/HIT", "Status": "Active" } },
                            { id: "alkhalid1", name: "Al-Khalid I", role: "MBT", specs: { "Gun": "125mm KBA-3", "Engine": "1200hp 6TD-2", "Armor": "Composite+ERA", "Speed": "72 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "alkhalid", name: "Al-Khalid", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1200hp 6TD-2", "Armor": "Composite+ERA", "Speed": "70 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "t80ud", name: "T-80UD", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "1000hp 6TD-1", "Armor": "K-5 ERA", "Speed": "60 km/h", "Origin": "Ukraine", "Status": "Active" } },
                            { id: "alzarrar", name: "Al-Zarrar", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "730hp Diesel", "Armor": "Add-on ERA", "Speed": "55 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "type85", name: "Type 85-IIAP", role: "MBT", specs: { "Gun": "125mm Smoothbore", "Engine": "730hp Diesel", "Armor": "Composite", "Speed": "57 km/h", "Origin": "China", "Status": "Active" } },
                            { id: "type69", name: "Type 69-IIMP", role: "MBT", specs: { "Gun": "105mm Rifled", "Engine": "580hp Diesel", "Armor": "Steel", "Speed": "50 km/h", "Origin": "China/HIT", "Status": "Reserve" } },
                            { id: "hamza6", name: "Hamza 6x6", role: "MRAP", specs: { "Gun": "12.7mm Turret", "Engine": "Diesel", "Armor": "Mine Resistant", "Speed": "90 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "talha", name: "Talha", role: "APC", specs: { "Gun": "12.7mm HMG", "Engine": "Detroit Diesel", "Armor": "Aluminum 5083", "Speed": "62 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "saad", name: "Saad", role: "APC", specs: { "Gun": "14.5mm HMG", "Engine": "400hp", "Armor": "Enhanced", "Speed": "65 km/h", "Origin": "HIT", "Status": "Active" } },
                            { id: "m113", name: "M113", role: "APC", specs: { "Gun": "12.7mm HMG", "Engine": "215hp", "Armor": "Aluminum", "Speed": "60 km/h", "Origin": "USA", "Status": "Active" } },
                            { id: "maxxpro", name: "MaxxPro", role: "MRAP", specs: { "Gun": "12.7mm", "Engine": "MaxxForce", "Armor": "V-Hull", "Speed": "100 km/h", "Origin": "USA", "Status": "Active" } },
                            { id: "dragoon", name: "Dragoon", role: "AFV", specs: { "Gun": "90mm", "Engine": "300hp", "Armor": "Steel", "Speed": "100 km/h", "Origin": "HIT", "Status": "Police" } }
                        ] 
                    },
                    artillery: { 
                        name: "Artillery & MLRS", 
                        items: [
                            { id: "fatah1", name: "Fatah-1", role: "GMLRS", specs: { "Caliber": "300mm", "Range": "140 km", "Guidance": "Inertial", "Origin": "GIDS", "Status": "Active" } },
                            { id: "a100", name: "A-100", role: "MLRS", specs: { "Caliber": "300mm", "Range": "100 km", "Guidance": "Simple Inertial", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "krl122", name: "KRL-122", role: "MLRS", specs: { "Caliber": "122mm", "Range": "40 km", "Guidance": "Unguided", "Origin": "KRL", "Status": "Active" } },
                            { id: "sh15", name: "SH-15", role: "SP Howitzer", specs: { "Caliber": "155mm / 52 Cal", "Range": "53km (V-LAP)", "Rate": "4-6 rpm", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "m109a5", name: "M109A5", role: "SP Howitzer", specs: { "Caliber": "155mm", "Range": "30km", "Rate": "4 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m109a2", name: "M109A2", role: "SP Howitzer", specs: { "Caliber": "155mm", "Range": "24km", "Rate": "3 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m110", name: "M110", role: "SP Howitzer", specs: { "Caliber": "203mm", "Range": "29km", "Rate": "1 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "panter", name: "Panter", role: "Towed Howitzer", specs: { "Caliber": "155mm", "Range": "40km", "Rate": "6 rpm", "Origin": "Turkey/Pak", "Status": "Active" } },
                            { id: "m198", name: "M198", role: "Towed Howitzer", specs: { "Caliber": "155mm", "Range": "30km", "Rate": "4 rpm", "Origin": "USA", "Status": "Active" } },
                            { id: "m115", name: "M115", role: "Towed Howitzer", specs: { "Caliber": "203mm", "Range": "16km", "Rate": "1 rpm", "Origin": "USA", "Status": "Reserve" } },
                             { id: "yarmuk", name: "Yarmuk", role: "MLRS", specs: { "Caliber": "122mm", "Range": "40km", "Rate": "40 rnd/20s", "Origin": "Indigenous", "Status": "Active" } }
                        ] 
                    },
                    infantry_arms: {
                        name: "Infantry Weapons",
                        items: [
                            { id: "bw20", name: "BW-20", role: "Assault Rifle", specs: { "Caliber": "5.56 / 7.62mm", "Range": "400m", "Action": "Roller Delayed", "Mag": "30 Round", "Origin": "POF (Indigenous)" } },
                            { id: "g3a3", name: "G3A3", role: "Battle Rifle", specs: { "Caliber": "7.62x51mm", "Range": "400m Effective", "Action": "Roller Delayed", "Mag": "20 Round", "Origin": "POF (License)" } },
                            { id: "type56", name: "Type 56-1", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "300m", "Action": "Gas Operated", "Mag": "30 Round", "Origin": "China/Pak" } },
                            { id: "cw39", name: "CW-39", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "400m", "Action": "Roller Delayed", "Mag": "30 Round", "Origin": "POF" } },
                            { id: "ak103", name: "AK-103", role: "Assault Rifle", specs: { "Caliber": "7.62x39mm", "Range": "500m", "Action": "Gas Operated", "Mag": "30 Round", "Origin": "Russia" } },
                            { id: "m4a1", name: "M4A1", role: "Carbine", specs: { "Caliber": "5.56mm", "Range": "500m", "Action": "Gas Impingement", "Mag": "30 Round", "Origin": "USA" } },
                            { id: "mg3", name: "MG3", role: "GPMG", specs: { "Caliber": "7.62x51mm", "Range": "1200m", "Action": "Recoil Operated", "Mag": "Belt Fed", "Origin": "POF" } },
                            { id: "pk16", name: "PK-16", role: "HMG", specs: { "Caliber": "12.7mm", "Range": "2000m", "Action": "Recoil Operated", "Mag": "Belt Fed", "Origin": "POF" } },
                            { id: "psr90", name: "PSR-90", role: "Sniper Rifle", specs: { "Caliber": "7.62x51mm", "Range": "800m", "Action": "Bolt Action", "Mag": "5 Round", "Origin": "POF" } },
                            { id: "pk9", name: "PK-9", role: "Pistol", specs: { "Caliber": "9mm", "Range": "50m", "Action": "Short Recoil", "Mag": "15 Round", "Origin": "POF" } },
                            { id: "rpg29", name: "RPG-29 Vampir", role: "Anti-Tank", specs: { "Caliber": "105mm", "Range": "500m", "Action": "Single Shot", "Mag": "1 Round", "Origin": "Russia/Pak" } },
                            { id: "kornet", name: "Kornet-E", role: "ATGM", specs: { "Caliber": "152mm", "Range": "5.5 km", "Action": "Laser Beam", "Mag": "1 Round", "Origin": "Russia" } },
                            { id: "bakhtar", name: "Bakhtar Shikan", role: "ATGM", specs: { "Caliber": "120mm", "Range": "3-4 km", "Action": "Wire SACLOS", "Mag": "1 Round", "Origin": "KRL" } },
                            { id: "tow2", name: "BGM-71 TOW", role: "ATGM", specs: { "Caliber": "152mm", "Range": "3.75 km", "Action": "Wire Guided", "Mag": "1 Round", "Origin": "USA" } },
                            { id: "anza3", name: "Anza Mk-III", role: "MANPADS", specs: { "Caliber": "72mm", "Range": "6km", "Action": "IR Homing", "Mag": "1 Round", "Origin": "KRL" } }
                        ]
                    }
                } 
            },
            airforce: { 
                name: "Pakistan Air Force", color: "text-neon-blue", accent: "#38bdf8", 
                cats: { 
                    fighters: { 
                        name: "Fighter Fleet", 
                        items: [
                            { id: "j10c", name: "J-10C Dragon", role: "Omni-Role", specs: { "Role": "Air Superiority", "Speed": "Mach 1.8", "Radar": "KLJ-7A AESA", "Armament": "PL-15/PL-10", "Range": "1850 km", "Origin": "China" } },
                            { id: "jf173", name: "JF-17 Block III", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 1.6", "Radar": "KLJ-7A AESA", "Armament": "PL-15/PL-10", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "jf172", name: "JF-17 Block II", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 1.6", "Radar": "KLJ-7 V2", "Armament": "SD-10/C-802", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "jf171", name: "JF-17 Block I", role: "Multi-Role", specs: { "Role": "Air Defense", "Speed": "Mach 1.6", "Radar": "KLJ-7 V1", "Armament": "SD-10", "Range": "1350 km", "Origin": "PAC Kamra" } },
                            { id: "f16c", name: "F-16C/D Blk 52", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 2.0", "Radar": "APG-68(V)9", "Armament": "AIM-120C-5", "Range": "3200 km (Ferry)", "Origin": "USA" } },
                             { id: "f16a", name: "F-16A/B MLU", role: "Multi-Role", specs: { "Role": "Multi-Role", "Speed": "Mach 2.0", "Radar": "APG-66(V)2", "Armament": "AIM-120C-5", "Range": "3200 km (Ferry)", "Origin": "USA" } },
                            { id: "mirage_rose", name: "Mirage ROSE", role: "Strike", specs: { "Role": "Deep Strike", "Speed": "Mach 2.2", "Radar": "Grifo-M3", "Armament": "Ra'ad/H-4", "Range": "1500 km", "Origin": "France/Pak" } },
                             { id: "mirage5", name: "Mirage 5 PA", role: "Maritime Strike", specs: { "Role": "Anti-Ship", "Speed": "Mach 2.2", "Radar": "Agave", "Armament": "Exocet", "Range": "1500 km", "Origin": "France" } },
                            { id: "f7pg", name: "F-7PG", role: "Interceptor", specs: { "Role": "Point Defense", "Speed": "Mach 2.0", "Radar": "Grifo-7", "Armament": "AIM-9", "Range": "850 km", "Origin": "China" } }
                        ] 
                    }, 
                    special: { 
                        name: "Special Mission & UAVs", 
                        items: [
                             { id: "shahpar3", name: "Shahpar-III", role: "MALE UCAV", specs: { "Role": "Strike/Recce", "Speed": "Unknown", "Armament": "6 Hardpoints", "Endurance": "20 Hours", "Origin": "GIDS" }, desc: "Group 4+ UCAV with heavy payload and SATCOM capability, inducted into active service." },
                            { id: "zdk03", name: "ZDK-03 Karakoram", role: "AEW&C", specs: { "Role": "AEW&C", "Radar": "AESA Rotodome", "Range": "450km (Detect)", "Platform": "Y-8F600", "Origin": "China" } },
                            { id: "erieye", name: "Saab 2000 Erieye", role: "AEW&C", specs: { "Role": "AEW&C", "Radar": "PS-890 AESA", "Range": "450km (Detect)", "Platform": "Saab 2000", "Origin": "Sweden" } },
                            { id: "falcon", name: "DA-20 Falcon", role: "EW/ELINT", specs: { "Role": "EW/Jamming", "Radar": "Classified", "Range": "Unknown", "Platform": "Falcon 20", "Origin": "France/Pak" } },
                             { id: "il78", name: "Il-78 Midas", role: "Tanker", specs: { "Role": "Refueling", "Radar": "Wx Radar", "Range": "Strategic", "Platform": "Il-76", "Origin": "Ukraine" } },
                            { id: "akinci", name: "Bayraktar Akƒ±ncƒ±", role: "HALE UCAV", specs: { "Role": "Strategic Strike", "Endurance": "24h", "Ceiling": "40k ft", "Payload": "1.3 Tons", "Origin": "Turkey" } },
                             { id: "tb2", name: "Bayraktar TB2", role: "MALE UCAV", specs: { "Role": "Strike/SEAD", "Endurance": "27h", "Ceiling": "25k ft", "Payload": "150 kg", "Origin": "Turkey" } },
                            { id: "shahpar2", name: "Shahpar-II", role: "MALE UCAV", specs: { "Role": "Recce/Strike", "Endurance": "14h", "Ceiling": "23k ft", "Payload": "Burq-II", "Origin": "GIDS" } },
                             { id: "wingloong", name: "Wing Loong II", role: "MALE UCAV", specs: { "Role": "Strike", "Endurance": "32h", "Ceiling": "32k ft", "Payload": "480 kg", "Origin": "China" } },
                            { id: "ch4", name: "CH-4", role: "MALE UCAV", specs: { "Role": "Strike", "Endurance": "30h", "Ceiling": "23k ft", "Payload": "345 kg", "Origin": "China" } }
                        ] 
                    },
                    trainers: {
                        name: "Trainers",
                        items: [
                            { id: "k8", name: "K-8 Karakoram", role: "Jet Trainer", specs: { "Role": "Intermediate", "Speed": "800 km/h", "Radar": "None", "Armament": "Pods", "Origin": "PAC/China" } },
                            { id: "t37", name: "T-37 Tweet", role: "Jet Trainer", specs: { "Role": "Basic Jet", "Speed": "680 km/h", "Radar": "None", "Armament": "None", "Origin": "USA" } },
                            { id: "mushshak", name: "Super Mushshak", role: "Prop Trainer", specs: { "Role": "Primary", "Speed": "268 km/h", "Radar": "None", "Armament": "None", "Origin": "PAC" } }
                        ]
                    },
                    munitions: {
                        name: "Standoff Weapons",
                        items: [
                            { id: "pl15", name: "PL-15", role: "LRAAM", specs: { "Range": "145km+", "Guidance": "AESA Seeker", "Warhead": "HE Frag", "Propulsion": "Dual Pulse", "Origin": "China" } },
                            { id: "aim120", name: "AIM-120C-5", role: "AMRAAM", specs: { "Range": "105km", "Guidance": "Active Radar", "Warhead": "HE Blast", "Propulsion": "Solid", "Origin": "USA" } },
                            { id: "sd10", name: "SD-10A", role: "BVR Missile", specs: { "Range": "100km", "Guidance": "Active Radar", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "pl10", name: "PL-10", role: "SRAAM", specs: { "Range": "20km", "Guidance": "IIR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "aim9", name: "AIM-9M", role: "Sidewinder", specs: { "Range": "18km", "Guidance": "IR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "USA" } },
                            { id: "raadz", name: "Ra'ad", role: "ALCM", specs: { "Range": "350km", "Guidance": "INS/GPS", "Warhead": "Nuc/HE", "Propulsion": "Turbojet", "Origin": "AWC" } },
                            { id: "h4", name: "H-4 SOW", role: "Glide Bomb", specs: { "Range": "120km", "Guidance": "TV/IR", "Warhead": "HE", "Propulsion": "Glide", "Origin": "NESCOM" } },
                             { id: "takbir", name: "Takbir", role: "Glide Bomb", specs: { "Range": "8km", "Guidance": "Satellite", "Warhead": "250kg", "Propulsion": "Glide", "Origin": "GIDS" } },
                            { id: "cm400", name: "CM-400AKG", role: "Anti-Ship", specs: { "Range": "400km", "Guidance": "Radar/IR", "Warhead": "Penetrator", "Propulsion": "Solid", "Origin": "China" } },
                            { id: "bkd", name: "BKD-1", role: "Bunker Buster", specs: { "Range": "Drop", "Guidance": "Laser", "Warhead": "Deep Pen", "Propulsion": "Gravity", "Origin": "AWC" } },
                            { id: "burq2", name: "Burq-II", role: "AGM", specs: { "Range": "10 km", "Guidance": "Laser", "Warhead": "HE Anti-Tank", "Propulsion": "Solid", "Origin": "NESCOM" } }
                        ]
                    },
                    asymmetric_air: {
                        name: "Tactical & Loitering",
                        items: [
                            { id: "kemankes", name: "Kemankes", role: "Mini Cruise", specs: { "Range": "200km+", "Guidance": "AI Optical", "Warhead": "HE", "Propulsion": "Jet", "Origin": "Turkey" } },
                            { id: "kagem", name: "KaGeM", role: "Loitering", specs: { "Range": "Unknown", "Guidance": "Man-in-loop", "Warhead": "Blast Frag", "Propulsion": "Prop", "Origin": "Turkey/Pak" } }
                        ]
                    }
                } 
            },
            navy: { 
                name: "Pakistan Navy", color: "text-cyan-400", accent: "#22d3ee", 
                cats: { 
                    surface: { 
                        name: "Surface Fleet", 
                        items: [
                            { id: "054ap", name: "Tughril Class", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "4200 Tons", "Missiles": "CM-302/LY-80N", "Speed": "27 Knots", "Origin": "China", "Status": "Active" } },
                            { id: "babur", name: "Babur Class", role: "Corvette", specs: { "Role": "Patrol/ASW", "Displacement": "3000 Tons", "Missiles": "Harbah/Albatros", "Speed": "29 Knots", "Origin": "Turkey/Pak", "Status": "Active" } },
                            { id: "f22p", name: "Zulfiquar Class", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "3100 Tons", "Missiles": "C-802/FM-90", "Speed": "29 Knots", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "alamgir", name: "PNS Alamgir", role: "Frigate", specs: { "Role": "ASW", "Displacement": "4100 Tons", "Missiles": "Harpoon", "Speed": "29 Knots", "Origin": "USA", "Status": "Active" } },
                            { id: "tariq", name: "Tariq Class", role: "Frigate", specs: { "Role": "Patrol", "Displacement": "3200 Tons", "Missiles": "Harpoon", "Speed": "30 Knots", "Origin": "UK", "Status": "Phasing Out" } },
                             { id: "yarmook", name: "Yarmook Class", role: "OPV", specs: { "Role": "Patrol", "Displacement": "2300 Tons", "Missiles": "Fitted For", "Speed": "24 Knots", "Origin": "Damen", "Status": "Active" } },
                            { id: "azmat", name: "Azmat Class", role: "FAC(M)", specs: { "Role": "Fast Attack", "Displacement": "560 Tons", "Missiles": "8x C-802A", "Speed": "30 Knots", "Origin": "KS&EW", "Status": "Active" } },
                            { id: "jurrat", name: "Jurrat Class", role: "Missile Boat", specs: { "Role": "Coastal", "Displacement": "250 Tons", "Missiles": "C-802", "Speed": "30 Knots", "Origin": "KS&EW", "Status": "Active" } },
                            { id: "munsif", name: "Munsif Class", role: "Minehunter", specs: { "Role": "MCMV", "Displacement": "500 Tons", "Missiles": "None", "Speed": "15 Knots", "Origin": "France", "Status": "Active" } }
                        ] 
                    },
                    subs: {
                        name: "Submarines",
                        items: [
                            { id: "hangor", name: "Hangor Class", role: "AIP SSK", specs: { "Role": "Attack/Strike", "Displacement": "2800 Tons", "Armament": "Babur-3/Yu-6", "Propulsion": "Stirling AIP", "Origin": "China/Pak", "Status": "Building" } },
                            { id: "agosta90b", name: "Agosta 90B", role: "AIP SSK", specs: { "Role": "Attack/Strike", "Displacement": "2050 Tons", "Armament": "Harpoon/Exocet", "Propulsion": "MESMA AIP", "Origin": "France/Pak", "Status": "Active" } },
                            { id: "agosta70", name: "Agosta 70", role: "SSK", specs: { "Role": "Hunter Killer", "Displacement": "1700 Tons", "Armament": "Harpoon", "Propulsion": "Diesel Electric", "Origin": "France", "Status": "Active" } },
                            { id: "xcraft", name: "X-Craft", role: "Midget Sub", specs: { "Role": "SOF Ops", "Displacement": "100 Tons", "Armament": "Torpedoes", "Propulsion": "Electric", "Origin": "KS&EW", "Status": "Active" } }
                        ]
                    },
                    aviation: {
                        name: "Naval Aviation",
                        items: [
                            { id: "seasultan", name: "Sea Sultan", role: "LRMP", specs: { "Role": "ASW/ASuW", "Speed": "Mach 0.82", "Range": "Strategic", "Armament": "Torpedoes/Missiles", "Origin": "Pak/Italy" } },
                            { id: "p3c", name: "P-3C Orion", role: "LRMP", specs: { "Role": "ASW", "Speed": "750 km/h", "Range": "4400 km", "Armament": "Harpoon", "Origin": "USA" } },
                            { id: "atr72", name: "ATR-72 MPA", role: "MPA", specs: { "Role": "Patrol/ASW", "Speed": "500 km/h", "Range": "1500 km", "Armament": "Torpedoes", "Origin": "Germany/Italy" } },
                            { id: "seaking", name: "Sea King", role: "ASW Helo", specs: { "Role": "ASW/SAR", "Speed": "208 km/h", "Range": "1200 km", "Armament": "Exocet", "Origin": "UK" } },
                            { id: "z9ec", name: "Z-9EC", role: "ASW Helo", specs: { "Role": "ASW", "Speed": "280 km/h", "Range": "400 km", "Armament": "Torpedoes", "Origin": "China" } },
                            { id: "luna", name: "Luna NG", role: "UAV", specs: { "Role": "Recon", "Speed": "100 km/h", "Range": "100 km", "Armament": "None", "Origin": "Germany" } }
                        ]
                    },
                    coastal: {
                        name: "Coastal Defense",
                        items: [
                            { id: "zarb", name: "Zarb", role: "Anti-Ship", specs: { "Range": "300km", "Warhead": "HE", "Guidance": "Active Radar", "Platform": "Land Truck", "Origin": "China/Pak", "Status": "Active" } },
                            { id: "harbah", name: "Harbah", role: "Cruise", specs: { "Range": "700km", "Warhead": "HE", "Guidance": "Active Radar", "Platform": "Land/Ship", "Origin": "GIDS", "Status": "Active" } }
                        ]
                    }
                } 
            },
            logistics: { 
                name: "Logistics", color: "text-white", accent: "#ffffff", 
                cats: { 
                    vehicles: { 
                        name: "Transport & Aux", 
                        items: [
                            { id: "hino", name: "Hino Truck", role: "Logistics", specs: { "Type": "Transport", "Drive": "6x6", "Usage": "General", "Origin": "Indigenous" } },
                             { id: "yakhlaq", name: "Yakhlaq", role: "Logistics", specs: { "Type": "Heavy Transport", "Drive": "8x8", "Usage": "Tank Carrier", "Origin": "HIT" } },
                            { id: "unimog", name: "Unimog", role: "Utility", specs: { "Type": "Utility", "Drive": "4x4", "Usage": "High Altitude", "Origin": "Germany" } },
                             { id: "landrover", name: "Land Rover", role: "Utility", specs: { "Type": "Utility", "Drive": "4x4", "Usage": "Comms/Staff", "Origin": "UK/Pak" } },
                             { id: "tanker", name: "Fuel Bowser", role: "Logistics", specs: { "Type": "Supply", "Drive": "6x6", "Usage": "Fuel", "Origin": "Indigenous" } },
                            { id: "recovery", name: "M88 Recovery", role: "ARV", specs: { "Type": "Recovery", "Drive": "Tracked", "Usage": "Tank Repair", "Origin": "USA" } },
                             { id: "alhadid", name: "Al-Hadid", role: "ARV", specs: { "Type": "Recovery", "Drive": "Tracked", "Usage": "APC Repair", "Origin": "HIT" } }
                        ] 
                    },
                    naval_aux: {
                         name: "Naval Auxiliaries",
                        items: [
                            { id: "moawin", name: "PNS Moawin", role: "Fleet Tanker", specs: { "Type": "Replenishment", "Tonnage": "17000t", "Usage": "Fleet Support", "Origin": "KS&EW" } },
                            { id: "nasr_ship", name: "PNS Nasr", role: "Replenishment", specs: { "Type": "Tanker", "Tonnage": "15000t", "Usage": "Fuel", "Origin": "China" } },
                            { id: "behr", name: "Behr Masah", role: "Survey", specs: { "Type": "Hydrography", "Tonnage": "3000t", "Usage": "Mapping", "Origin": "China" } },
                             { id: "madadgar", name: "Madadgar", role: "Utility", specs: { "Type": "Coastal", "Tonnage": "Small", "Usage": "Logistics", "Origin": "Pak" } }
                        ]
                    },
                     gear: {
                        name: "General Gear",
                        items: [
                            { id: "vest", name: "Body Armor", role: "Protection", specs: { "Type": "Plate Carrier", "Level": "NIJ IV", "Material": "Ceramic", "Origin": "GIDS" } },
                            { id: "helmet", name: "Ballistic Helmet", role: "Protection", specs: { "Type": "ACH/High Cut", "Level": "NIJ IIIA", "Material": "Kevlar/Composite", "Origin": "GIDS" } },
                             { id: "nvg", name: "Night Vision", role: "Optics", specs: { "Type": "Monocular", "Gen": "3", "Tech": "IIT", "Origin": "IEP" } }
                        ]
                    }
                } 
            },
            industry: { 
                name: "Industry", color: "text-neon-purple", accent: "#b026ff", 
                cats: { 
                    giants: { 
                        name: "Major Complexes", 
                        items: [
                            { id: "nastp", name: "NASTP", role: "Tech Park", specs: { "Domain": "Cyber/EW/Space", "Product": "Software/Design", "Location": "Rawalpindi", "Type": "Strategic" } },
                            { id: "pac", name: "PAC Kamra", role: "Aviation", specs: { "Domain": "Aerospace", "Product": "JF-17 Thunder", "Location": "Kamra", "Type": "State Owned" } },
                            { id: "hit", name: "HIT Taxila", role: "Land Systems", specs: { "Domain": "Armor", "Product": "Al-Khalid/VT-4", "Location": "Taxila", "Type": "State Owned" } },
                             { id: "gids", name: "GIDS", role: "R&D", specs: { "Domain": "Electronics/UAV", "Product": "Shahpar/Fatah", "Location": "Rawalpindi", "Type": "Conglomerate" } },
                            { id: "pof", name: "POF Wah", role: "Ordnance", specs: { "Domain": "Ammo/Arms", "Product": "G3/Ammo", "Location": "Wah Cantt", "Type": "State Owned" } },
                             { id: "ksew", name: "Karachi Shipyard", role: "Naval", specs: { "Domain": "Shipbuilding", "Product": "Subs/Frigates", "Location": "Karachi", "Type": "State Owned" } },
                             { id: "nrtc", name: "NRTC", role: "Electronics", specs: { "Domain": "Comms", "Product": "Radios/Jammers", "Location": "Haripur", "Type": "State Owned" } },
                            { id: "nescom", name: "NESCOM", role: "Strategic", specs: { "Domain": "Missiles", "Product": "Shaheen/Babur", "Location": "Islamabad", "Type": "State Owned" } }
                        ] 
                    } 
                } 
            },
            future: { 
                name: "FUTURE PROJECTS & R&D", color: "text-neon-purple", accent: "#b026ff", 
                cats: { 
                    future_aerospace: { 
                        name: "Future Aerospace", 
                        items: [
                            { id: "pfx", name: "PF-X (Project Azm)", role: "5th Gen Fighter", specs: { "Role": "Air Dominance", "Speed": "Mach 2.0+", "Radar": "Advanced AESA", "Armament": "Internal Bays", "Origin": "PAC/AWC" }, desc: "Next-generation stealth fighter program designed for air superiority." },
                            { id: "jf17_blk4", name: "JF-17 Block 4", role: "Next Gen", specs: { "Role": "Stealthy Multi-Role", "Speed": "Mach 1.8+", "Radar": "Indigenous AESA (GaN)", "Armament": "FAAZ-2", "Range": "Extended", "Origin": "PAC/AWC" } }
                        ] 
                    },
                    future_missiles: { 
                        name: "Future Missiles", 
                        items: [
                            { id: "p282", name: "P-282", role: "Hypersonic", specs: { "Range": "350 km", "Warhead": "Anti-Ship/Land", "Guidance": "Advanced Inertial", "Propulsion": "Solid (Mach 5+)", "Origin": "NESCOM" } },
                            { id: "fatah5", name: "Fatah-5", role: "Long Range GMLRS", specs: { "Range": "1000 km", "Guidance": "Inertial/Satellite", "Warhead": "Unitary/Cluster", "Origin": "GIDS", "Status": "Development (2026)" }, desc: "Expected 1000km range guided rocket system for the Army Rocket Force Command." },
                            { id: "faaz2", name: "FAAZ-2", role: "BVR AAM", specs: { "Range": "180 km", "Guidance": "Active RF/IIR", "Warhead": "HE Frag", "Propulsion": "Solid", "Origin": "GIDS" } },
                            { id: "taimoor", name: "Taimoor", role: "ALCM", specs: { "Range": "600 km", "Warhead": "Conventional/Nuc", "Guidance": "Stealth/Terrain", "Propulsion": "Turbofan", "Origin": "Indigenous" } },
                             { id: "lomads", name: "GIDS LOMADS", role: "LOMADS", specs: { "Range": "100 km", "Guidance": "Active Radar", "Ceiling": "20 km", "Radar": "AESA", "Origin": "GIDS" } },
                            { id: "faazsl", name: "FAAZ-SL", role: "E-SHORADS", specs: { "Range": "25 km", "Guidance": "Active RF/IIR", "Ceiling": "8 km", "Mount": "Mobile", "Origin": "GIDS" } }
                        ] 
                    },
                    future_land: { 
                        name: "Future Land Systems", 
                        items: [
                            { id: "faaris", name: "Faaris APC", role: "APC", specs: { "Gun": "12.7mm/14.5mm", "Engine": "Diesel", "Armor": "B7", "Speed": "100 km/h", "Origin": "GIDS" } },
                            { id: "hamza8", name: "Hamza 8x8", role: "IFV", specs: { "Gun": "30mm Cannon", "Engine": "600hp", "Armor": "STANAG 4", "Speed": "100 km/h", "Origin": "HIT" } }
                        ] 
                    },
                    future_naval: { 
                        name: "Future Naval", 
                        items: [
                            { id: "jinnah_frigate", name: "Jinnah Class Frigate", role: "Frigate", specs: { "Role": "Multi-Role", "Displacement": "3300 Tons", "Missiles": "VLS/Harbah", "Speed": "26+ Knots", "Origin": "KSEW (Indigenous)" }, desc: "Indigenously designed frigate project." }
                        ] 
                    },
                    future_ew: {
                        name: "Future EW & Cyber",
                        items: [
                            { id: "zarbsamaa", name: "Zarb-e-Samaa", role: "AWACS", specs: { "Role": "AEW&C", "Radar": "Indigenous AESA", "Range": "450km+", "Platform": "Lineage 1000E", "Origin": "PAC/GIDS" } },
                            { id: "global6000", name: "Global 6000 SOJ", role: "EW/SOJ", specs: { "Role": "Stand-off Jammer", "Radar": "Havelsan Suite", "Range": "Global", "Platform": "Bombardier", "Origin": "Pak/Turkey" } },
                            { id: "aesa", name: "Indigenous AESA", role: "Radar", specs: { "Type": "GaN Module", "Status": "Testing", "Range": "Long", "Goal": "JF-17 Blk 4" } }
                        ] 
                    },
                    future_drones: {
                        name: "Future Drones",
                        items: [
                            { id: "arrow1", name: "Arrow-1", role: "Loitering", specs: { "Type": "Munition", "Status": "R&D", "Range": "Long", "Goal": "Precision" } }
                        ]
                    }
                } 
            }
        };

        const app = {
            viewport: document.getElementById('viewport'),

            view: function(key) {
                this.viewport.scrollTop = 0; 
                if(key === 'home') this.renderHome();
                else this.renderBranch(key);
                
                if(key !== 'home') history.pushState({ page: key }, null, `#${key}`);
                else history.pushState({ page: 'home' }, null, '');
            },

            renderHome: function() {
                this.viewport.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-[60vh] fade-in pt-10">
                        <div class="w-24 h-24 border-2 border-neon-blue rounded-full flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(0,243,255,0.2)] bg-black/50 backdrop-blur-xl">
                            <span class="text-5xl text-neon-blue animate-pulse">‚å¨</span>
                        </div>
                        <h1 class="text-6xl md:text-8xl text-white font-header tracking-tight mb-2">SENTINEL <span class="text-neon-blue">DB</span></h1>
                        <p class="text-gray-500 font-mono tracking-[0.4em] text-xs md:text-sm mb-12">FULL SPECTRUM DEFENSE ARCHIVE</p>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 w-full max-w-4xl px-4">
                            ${this.homeBtn('nuclear', 'STRATEGIC', 'text-neon-amber', 'border-neon-amber')}
                            ${this.homeBtn('army', 'ARMY', 'text-neon-green', 'border-neon-green')}
                            ${this.homeBtn('airforce', 'AIR FORCE', 'text-neon-blue', 'border-neon-blue')}
                            ${this.homeBtn('navy', 'NAVY', 'text-cyan-400', 'border-cyan-400')}
                            ${this.homeBtn('logistics', 'LOGISTICS', 'text-white', 'border-white')}
                            ${this.homeBtn('industry', 'INDUSTRY', 'text-neon-purple', 'border-neon-purple')}
                        </div>
                    </div>
                `;
            },

            homeBtn: function(key, title, color, border) {
                return `<div onclick="app.view('${key}')" class="glass p-6 rounded cursor-pointer hover:bg-white/5 border-t-2 border-transparent hover:${border} transition-all flex flex-col items-center justify-center h-28 group float-card"><span class="text-white font-header text-2xl group-hover:${color}">${title}</span><span class="text-[9px] text-gray-500 mt-2 font-mono group-hover:text-white transition-colors">ACCESS &rarr;</span></div>`;
            },

            renderBranch: function(key) {
                const data = DB[key];
                let html = `
                    <div class="fade-in max-w-7xl mx-auto pb-10">
                        <div class="flex justify-between items-end border-b border-white/10 pb-4 mb-6 pt-2 relative">
                            <div>
                                <h1 class="text-5xl text-white font-header ${data.color}">${data.name}</h1>
                                <p class="text-xs text-gray-500 font-mono">SECTOR ID: ${key.toUpperCase()}</p>
                            </div>
                            <button onclick="app.view('home')" class="text-[10px] text-gray-400 border border-white/10 px-3 py-1 rounded hover:bg-white/10">CLOSE</button>
                        </div>
                        <div class="space-y-4">
                `;

                for(const [cKey, cat] of Object.entries(data.cats)) {
                    html += `
                        <div id="section-${cKey}" class="glass overflow-hidden rounded-lg transition-all border border-white/5 hover:border-${data.accent.replace('#','')}">
                            <button onclick="app.toggleCategory('${cKey}')" class="w-full p-4 flex justify-between items-center text-left focus:outline-none">
                                <span class="text-xl font-header text-white tracking-wide flex items-center gap-3">
                                    <span class="w-1 h-6 bg-${data.color.split('-')[1]}-500"></span> ${cat.name}
                                </span>
                                <span id="icon-${cKey}" class="text-${data.color.split('-')[1]}-500 text-xl transition-transform duration-300 transform rotate-0">+</span>
                            </button>
                            
                            <div id="drawer-${cKey}" class="hidden transition-all duration-500 ease-in-out">
                                <div class="p-4 bg-black/40 flex justify-end">
                                    <button onclick="document.getElementById('chart-${cKey}').scrollIntoView({behavior:'smooth'})" class="text-[9px] border border-white/20 px-2 py-1 rounded text-gray-400 hover:text-white font-mono uppercase">
                                        ‚ñº ANALYTICS
                                    </button>
                                </div>
                                <div class="p-4 border-t border-white/5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    `;
                    
                    cat.items.forEach(item => {
                        let specs = '';
                        let i = 0;
                        for(const [k,v] of Object.entries(item.specs)) {
                            if(i++ < 3) specs += `<div class="flex justify-between text-[10px] text-gray-500 py-1 border-b border-white/5"><span>${k}</span><span class="text-gray-300 font-mono">${v}</span></div>`;
                        }
                        
                        html += `
                            <div onclick="app.openModal('${key}', '${cKey}', '${item.id}')" class="glass float-card p-5 rounded cursor-pointer hover:border-${data.accent.replace('#','')} group relative overflow-hidden">
                                <div class="flex justify-between items-start mb-3">
                                    <h4 class="text-xl font-bold text-white font-header leading-none group-hover:${data.color}">${item.name}</h4>
                                    <span class="text-[9px] px-1.5 py-0.5 bg-white/5 rounded text-gray-400 border border-white/10">${item.role}</span>
                                </div>
                                <div class="space-y-1 mb-2">
                                    ${specs}
                                </div>
                                <div class="text-[9px] text-right text-gray-600 mt-3 group-hover:text-white transition-colors">VIEW DATASHEET &rarr;</div>
                            </div>
                        `;
                    });

                    html += `</div>
                        <div class="p-4 bg-black/40 border-t border-white/5">
                            <h4 class="text-[10px] text-gray-500 font-mono mb-2">PERFORMANCE METRICS (ESTIMATED)</h4>
                            <div class="chart-wrapper h-40"><canvas id="chart-${cKey}"></canvas></div>
                        </div>
                    </div></div>`;
                }
                
                html += `</div></div>`;
                this.viewport.innerHTML = html;

                setTimeout(() => {
                    for(const [cKey, cat] of Object.entries(data.cats)) {
                        this.renderDrawerChart(cKey, cat, key);
                    }
                }, 100);
            },

            toggleCategory: function(id) {
                const allDrawers = document.querySelectorAll('[id^="drawer-"]');
                const allIcons = document.querySelectorAll('[id^="icon-"]');
                
                allDrawers.forEach(el => {
                    if(el.id !== `drawer-${id}`) {
                        el.classList.add('hidden');
                    }
                });
                
                allIcons.forEach(el => {
                    if(el.id !== `icon-${id}`) el.innerText = '+';
                });

                const drawer = document.getElementById(`drawer-${id}`);
                const icon = document.getElementById(`icon-${id}`);
                
                if(drawer.classList.contains('hidden')) {
                    drawer.classList.remove('hidden');
                    icon.innerText = '‚àí';
                    setTimeout(() => {
                        const section = document.getElementById(`section-${id}`);
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                } else {
                    drawer.classList.add('hidden');
                    icon.innerText = '+';
                }
            },

            renderDrawerChart: function(cKey, cat, bKey) {
                const ctx = document.getElementById(`chart-${cKey}`);
                if (!ctx) return;

                const labels = [];
                const dataPoints = [];
                
                let metric = 'Range (KM)';
                if (bKey === 'navy' && (cKey === 'surface' || cKey === 'subs')) metric = 'Displacement (Tons)';
                if (bKey === 'airforce' && cKey === 'fighters') metric = 'Speed (Mach x10)';
                if (cKey === 'armor') metric = 'Engine (HP)';
                if (cKey === 'infantry_arms') metric = 'Range (m)';

                cat.items.forEach(i => {
                    let val = 0;
                    
                    let text = "";
                    if (metric === 'Range (KM)' && i.specs.Range) text = i.specs.Range;
                    if (metric === 'Range (m)' && i.specs.Range) text = i.specs.Range;
                    if (metric === 'Displacement (Tons)' && i.specs.Displacement) text = i.specs.Displacement;
                    if (metric === 'Engine (HP)' && i.specs.Engine) text = i.specs.Engine;
                    if (metric === 'Speed (Mach x10)' && i.specs.Speed) text = i.specs.Speed;

                    if(text) {
                        let matches = text.match(/(\d+(?:,\d+)*(?:\.\d+)?)/g);
                        if(matches) {
                            let nums = matches.map(m => parseFloat(m.replace(/,/g, '')));
                            val = Math.max(...nums);
                            if(metric.includes("Mach")) val = val * 10;
                        }
                    }
                    
                    if (val > 0) { 
                        labels.push(i.name.split(' ')[0]); 
                        dataPoints.push(val); 
                    }
                });

                if (dataPoints.length === 0) {
                    ctx.parentElement.style.display = 'none';
                    return;
                }

                new Chart(ctx, {
                    type: 'bar',
                    data: { labels: labels, datasets: [{ label: metric, data: dataPoints, backgroundColor: 'rgba(255, 255, 255, 0.2)', hoverBackgroundColor: '#00f3ff', barThickness: 10, borderRadius: 4 }] },
                    options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false }, ticks: { color: '#666', font: { family: 'JetBrains Mono', size: 9 } } }, y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#666' } } } }
                });
            },

            openModal: function(bKey, cKey, itemId) {
                const item = DB[bKey].cats[cKey].items.find(i => i.id === itemId);
                const data = DB[bKey];
                let specsFull = '';
                for(const [k,v] of Object.entries(item.specs)) specsFull += `<div class="bg-black/40 border border-white/10 p-3"><div class="text-[9px] text-gray-500 uppercase font-mono mb-1">${k}</div><div class="text-sm text-white font-body font-bold">${v}</div></div>`;

                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md fade-in';
                modal.innerHTML = `
                    <div class="w-full max-w-2xl glass border border-white/20 rounded shadow-2xl overflow-hidden relative" onclick="event.stopPropagation()">
                        <button class="absolute top-4 right-4 text-gray-500 hover:text-white" onclick="this.closest('.fixed').remove()">‚úï</button>
                        <div class="p-8 bg-gradient-to-r from-gray-900 to-black border-b border-white/10">
                            <div class="text-[10px] ${data.color} font-mono font-bold tracking-widest mb-2 flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-current animate-pulse"></span> ${data.name.toUpperCase()} // ${item.role}</div>
                            <h1 class="text-5xl text-white font-header">${item.name}</h1>
                        </div>
                        <div class="p-8 bg-black/50 overflow-y-auto max-h-[60vh]">
                            <h3 class="text-sm text-white font-header mb-4">TECHNICAL SPECIFICATIONS</h3>
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 mb-6">${specsFull}</div>
                            <div class="text-[10px] text-gray-500 font-mono border-t border-white/10 pt-4">NOTE: Data aggregated from Open Source Intelligence (OSINT). Performance metrics are estimates.</div>
                        </div>
                    </div>`;
                modal.onclick = () => modal.remove();
                document.body.appendChild(modal);
            },
            
            toggleMobileMenu: function() { document.getElementById('mobileMenu').classList.toggle('active'); },
            viewMobile: function(key) { this.toggleMobileMenu(); this.view(key); },
            toggleMobileSearch: function() { document.getElementById('mobileSearch').classList.toggle('hidden'); document.getElementById('mobileSearchInput').focus(); },
            closeMobileSearch: function() { 
                document.getElementById('mobileSearch').classList.add('hidden'); 
                document.getElementById('mobileSearchInput').value = '';
                this.view('home'); 
            },
            search: function(q) {
                if (!q || q.length < 2) { this.view('home'); return; }
                q = q.toLowerCase();
                let html = `<div class="fade-in pt-4"><h2 class="text-2xl text-white font-header mb-6">SEARCH RESULTS: "${q.toUpperCase()}"</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4">`;
                let count = 0;
                for (const [bKey, branch] of Object.entries(DB)) {
                    for (const [cKey, cat] of Object.entries(branch.cats)) {
                        cat.items.forEach(item => {
                            if (item.name.toLowerCase().includes(q) || item.id.includes(q)) {
                                count++;
                                html += `<div onclick="app.openModal('${bKey}', '${cKey}', '${item.id}')" class="glass float-card p-4 cursor-pointer hover:bg-white/10 border-l-2 border-transparent hover:border-white transition-all"><div class="text-white font-bold font-header text-lg">${item.name}</div><div class="text-[9px] text-gray-500 font-mono">${branch.name} // ${item.role}</div></div>`;
                            }
                        });
                    }
                }
                if (count === 0) html += `<div class="text-gray-500 font-mono text-sm col-span-3">NO RESULTS FOUND.</div>`;
                html += `</div></div>`;
                this.viewport.innerHTML = html;
                
                const dBtn = document.getElementById('desktopClearBtn');
                const mBtn = document.getElementById('mobileClearBtn');
                if(q.length > 0) {
                    if(dBtn) dBtn.classList.remove('hidden');
                    if(mBtn) mBtn.classList.remove('hidden');
                } else {
                    if(dBtn) dBtn.classList.add('hidden');
                    if(mBtn) mBtn.classList.add('hidden');
                }
            },
            clearSearch: function(type) {
                const id = type === 'desktop' ? 'desktopSearch' : 'mobileSearchInput';
                const el = document.getElementById(id);
                el.value = '';
                el.focus();
                this.search('');
                
                const btnId = type === 'desktop' ? 'desktopClearBtn' : 'mobileClearBtn';
                document.getElementById(btnId).classList.add('hidden');
            },
            scrollToTop: function() { this.viewport.scrollTo({ top: 0, behavior: 'smooth' }); }
        };

        // History Management
        window.onpopstate = function(event) {
            if (event.state && event.state.page) {
                if (event.state.page === 'home') app.renderHome();
                else app.renderBranch(event.state.page);
            } else {
                app.renderHome();
            }
        };

        app.renderHome();
        history.replaceState({ page: 'home' }, null, '');
        
        const ghost = document.getElementById('ghostArrow');
        document.getElementById('viewport').addEventListener('scroll', (e) => {
            if(e.target.scrollTop > 300) { ghost.classList.remove('opacity-0', 'pointer-events-none'); }
            else { ghost.classList.add('opacity-0', 'pointer-events-none'); }
        });
    </script>
</body>
</html>

